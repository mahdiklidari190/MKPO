<!DOCTYPE html>
<html lang="fa" dir="rtl" data-theme="auto">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Ù…ØªÙ† Ùˆ Ø¨Ø§Ø²ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ 3.0</title>
    
    <!-- SEO & PWA -->
    <meta name="description" content="Ø§Ø¨Ø²Ø§Ø± ØªØ¨Ø¯ÛŒÙ„ Ù…ØªÙ†ØŒ Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒØŒ ÙÛŒÙ†Ú¯Ù„ÛŒØ´ Ùˆ Ø¨Ø§Ø²ÛŒâ€ŒÙ‡Ø§ÛŒ Ú†Ù†Ø¯Ù†ÙØ±Ù‡ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¨Ø§ UI ÙÙˆÙ‚â€ŒØ­Ø±ÙÙ‡â€ŒØ§ÛŒ">
    <meta name="keywords" content="Ø¨Ø§Ø²ÛŒ,Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ,ÙÛŒÙ†Ú¯Ù„ÛŒØ´,Ø§Ø¨Ø²Ø§Ø± Ù…ØªÙ†,Ù…Ù†ÙˆÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ,UI Ø®Ø±Ø®Ø±Ù‡">
    <link rel="manifest" href="data:application/json,%7B%22name%22%3A%22Ù…ØªÙ†%20Ùˆ%20Ø¨Ø§Ø²ÛŒ%20Ù‡ÙˆØ´Ù…Ù†Ø¯%203.0%22%2C%22short_name%22%3A%22Ù…ØªÙ†%20Ø¨Ø§Ø²ÛŒ%203%22%2C%22start_url%22%3A%22/%22%2C%22display%22%3A%22standalone%22%2C%22background_color%22%3A%220a192f%22%2C%22theme_color%22%3A%2264ffda%22%7D">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Fonts -->
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
    
    <!-- CryptoJS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js" defer></script>
    
    <style>
        /* ==================== CSS VARIABLES & THEME SYSTEM ==================== */
        :root {
            --bg-primary: #f0f4f8;
            --bg-secondary: #ffffff;
            --bg-card: #ffffff;
            --bg-header: rgba(255,255,255,0.9);
            --text-primary: #0a192f;
            --text-secondary: #495670;
            --accent: #64ffda;
            --primary: #6c5ce7;
            --danger: #ff7675;
            --success: #00b894;
            --warning: #fdcb6e;
            --border: rgba(0,0,0,0.08);
            --shadow: rgba(0,0,0,0.1);
            --glass: rgba(255,255,255,0.85);
            --gradient: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            --transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            --border-radius: 24px;
            --nav-height: 80px;
            --font-sans: 'Vazir', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
        }

        [data-theme="dark"] {
            --bg-primary: #0a192f;
            --bg-secondary: #112240;
            --bg-card: #172a45;
            --bg-header: rgba(17,34,64,0.9);
            --text-primary: #e6f1ff;
            --text-secondary: #8892b0;
            --accent: #64ffda;
            --primary: #6c5ce7;
            --border: rgba(100,255,218,0.08);
            --shadow: rgba(0,0,0,0.3);
            --glass: rgba(17,34,64,0.85);
        }

        @media (prefers-color-scheme: dark) {
            [data-theme="auto"] {
                --bg-primary: #0a192f;
                --bg-secondary: #112240;
                --bg-card: #172a45;
                --bg-header: rgba(17,34,64,0.9);
                --text-primary: #e6f1ff;
            }
        }

        /* ==================== RESET & BASE ==================== */
        *,*::before,*::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }

        body {
            font-family: var(--font-sans);
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            padding-top: var(--nav-height);
            overflow-x: hidden;
            transition: var(--transition);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* ==================== HEADER & MENU ==================== */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--nav-height);
            background: var(--bg-header);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border-bottom: 1px solid var(--border);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 clamp(1rem, 3vw, 2rem);
            transition: var(--transition);
        }

        .logo {
            font-size: clamp(1.2rem, 2vw, 1.5rem);
            font-weight: 800;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            letter-spacing: -0.02em;
        }

        /* Desktop Menu */
        .desktop-menu {
            display: flex;
            gap: clamp(0.5rem, 2vw, 1.5rem);
            align-items: center;
        }

        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            padding: 0.75rem 1.5rem;
            border-radius: 50px;
            transition: var(--transition);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
            overflow: hidden;
            white-space: nowrap;
            user-select: none;
        }

        .nav-link::before {
            content: '';
            position: absolute;
            inset: 0;
            background: var(--gradient);
            opacity: 0;
            transition: opacity 0.3s;
            z-index: -1;
        }

        .nav-link:hover {
            color: var(--bg-primary);
            transform: translateY(-3px);
        }

        .nav-link:hover::before {
            opacity: 1;
        }

        .nav-link.active {
            color: var(--bg-primary);
            background: var(--gradient);
            box-shadow: 0 4px 15px rgba(108, 92, 231, 0.3);
        }

        /* Theme Toggle */
        .theme-toggle-header {
            display: flex;
            background: var(--glass);
            border: 1px solid var(--border);
            border-radius: 50px;
            padding: 0.25rem;
            backdrop-filter: blur(10px);
            margin: 0 1rem;
        }

        .theme-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0.75rem;
            border-radius: 50%;
            transition: var(--transition);
            font-size: 1.1rem;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .theme-btn.active {
            background: var(--accent);
            color: var(--bg-primary);
            transform: scale(1.1);
            box-shadow: 0 0 10px rgba(100,255,218,0.5);
        }

        /* Mobile Hamburger */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            z-index: 1001;
        }

        .hamburger {
            display: block;
            width: 25px;
            height: 3px;
            background: var(--text-primary);
            border-radius: 3px;
            position: relative;
            transition: var(--transition);
        }

        .hamburger::before,
        .hamburger::after {
            content: '';
            position: absolute;
            width: 25px;
            height: 3px;
            background: var(--text-primary);
            border-radius: 3px;
            transition: var(--transition);
        }

        .hamburger::before {
            top: -8px;
        }

        .hamburger::after {
            top: 8px;
        }

        .mobile-menu-toggle.active .hamburger {
            background: transparent;
        }

        .mobile-menu-toggle.active .hamburger::before {
            transform: rotate(45deg);
            top: 0;
        }

        .mobile-menu-toggle.active .hamburger::after {
            transform: rotate(-45deg);
            top: 0;
        }

        /* Mobile Overlay & Drawer */
        .mobile-menu-overlay {
            display: none;
            position: fixed;
            top: var(--nav-height);
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--glass);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            z-index: 999;
            opacity: 0;
            transition: opacity 0.4s;
        }

        .mobile-menu-overlay.active {
            display: block;
            opacity: 1;
        }

        .mobile-menu-drawer {
            position: absolute;
            top: 0;
            right: -100%;
            width: min(80vw, 350px);
            height: 100%;
            background: var(--bg-card);
            border-left: 1px solid var(--border);
            transition: right 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            padding: 2rem;
            overflow-y: auto;
            box-shadow: -10px 0 30px var(--shadow);
        }

        .mobile-menu-overlay.active .mobile-menu-drawer {
            right: 0;
        }

        .mobile-nav-list {
            list-style: none;
        }

        .mobile-nav-item {
            margin-bottom: 1rem;
        }

        .mobile-nav-link {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            color: var(--text-primary);
            text-decoration: none;
            border-radius: 12px;
            transition: var(--transition);
            font-size: 1.1rem;
            font-weight: 600;
        }

        .mobile-nav-link:hover,
        .mobile-nav-link.active {
            background: var(--gradient);
            color: var(--bg-primary);
            transform: translateX(-10px);
        }

        /* ==================== MAIN CONTENT ==================== */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: clamp(1rem, 3vw, 2rem);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.6s ease-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ==================== CARD COMPONENT ==================== */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--border-radius);
            padding: clamp(1.5rem, 3vw, 2.5rem);
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px var(--shadow);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px var(--shadow);
        }

        .card h2 {
            color: var(--accent);
            margin-bottom: 1rem;
            font-size: clamp(1.3rem, 3vw, 1.8rem);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .card p {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
        }

        /* ==================== INPUT FIELDS ==================== */
        .input-group {
            margin-bottom: 1.5rem;
            position: relative;
        }

        .input-group label {
            display: block;
            margin-bottom: 0.75rem;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        .input-field {
            width: 100%;
            padding: 1rem 1.5rem;
            border: 2px solid var(--border);
            border-radius: 12px;
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-family: var(--font-mono);
            resize: vertical;
            min-height: 120px;
            transition: var(--transition);
            font-size: 1rem;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 4px rgba(100,255,218,0.1);
        }

        /* ==================== BUTTONS ==================== */
        .btn-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
            margin: 2rem 0;
        }

        .btn {
            padding: 0.75rem 2rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-family: var(--font-sans);
            font-weight: 600;
            font-size: 1rem;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
            overflow: hidden;
            user-select: none;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 100%;
            background: rgba(255,255,255,0.2);
            transition: width 0.4s ease-out;
        }

        .btn:hover {
            transform: translateY(-4px) scale(1.05);
        }

        .btn:hover::before {
            width: 100%;
        }

        .btn:active {
            transform: scale(0.95);
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-secondary {
            background: var(--accent);
            color: var(--bg-primary);
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-warning {
            background: var(--warning);
            color: var(--bg-primary);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* ==================== GAMES GRID ==================== */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .game-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--border-radius);
            padding: 2rem;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .game-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--gradient);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.5s;
        }

        .game-card:hover::before {
            transform: scaleX(1);
        }

        .game-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px var(--shadow);
            border-color: var(--accent);
        }

        .game-card h3 {
            color: var(--accent);
            margin-bottom: 0.75rem;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .game-card p {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .game-players {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .player-badge {
            background: var(--border);
            color: var(--text-secondary);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            transition: var(--transition);
        }

        .player-badge.active {
            background: var(--accent);
            color: var(--bg-primary);
            font-weight: 600;
        }

        /* ==================== GAME BOARD ==================== */
        .game-container {
            display: none;
            background: var(--glass);
            border: 1px solid var(--border);
            border-radius: var(--border-radius);
            padding: 2rem;
            margin-top: 2rem;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            animation: slideUp 0.5s ease-out;
        }

        .game-container.active {
            display: block;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .game-board {
            display: grid;
            gap: 5px;
            max-width: 400px;
            margin: 2rem auto;
            background: var(--border);
            padding: 10px;
            border-radius: 12px;
            box-shadow: 0 10px 30px var(--shadow);
        }

        .game-cell {
            background: var(--bg-secondary);
            border: 2px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 800;
            transition: var(--transition);
            aspect-ratio: 1;
            user-select: none;
        }

        .game-cell:hover {
            background: var(--accent);
            transform: scale(0.95);
        }

        .game-cell.x {
            color: var(--primary);
            animation: popIn 0.3s;
        }

        .game-cell.o {
            color: var(--danger);
            animation: popIn 0.3s;
        }

        @keyframes popIn {
            0% { transform: scale(0); }
            80% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .game-info {
            text-align: center;
            margin: 1.5rem 0;
            font-size: clamp(1rem, 2vw, 1.3rem);
            font-weight: 700;
            color: var(--accent);
        }

        .game-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        /* ==================== HISTORY & LIBRARY ==================== */
        .history-panel {
            max-height: 500px;
            overflow-y: auto;
            background: var(--glass);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            margin-top: 1rem;
            backdrop-filter: blur(10px);
        }

        .history-item {
            background: var(--bg-secondary);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 0.75rem;
            cursor: pointer;
            transition: var(--transition);
            border-left: 4px solid var(--accent);
        }

        .history-item:hover {
            background: var(--border);
            transform: translateX(-5px);
            box-shadow: 0 5px 15px var(--shadow);
        }

        .history-item .history-date {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
        }

        .history-item .history-text {
            font-family: var(--font-mono);
            font-size: 0.9rem;
            word-break: break-all;
        }

        /* ==================== TOAST NOTIFIER ==================== */
        .toast {
            position: fixed;
            top: calc(var(--nav-height) + 20px);
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            z-index: 10000;
            animation: slideIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            font-weight: 600;
            max-width: calc(100vw - 40px);
            word-wrap: break-word;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--border);
        }

        .toast-success {
            background: rgba(0,184,148,0.9);
            color: white;
        }

        .toast-error {
            background: rgba(255,118,117,0.9);
            color: white;
        }

        .toast-info {
            background: rgba(253,203,110,0.9);
            color: var(--bg-primary);
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* ==================== RESPONSIVE DESIGN ==================== */
        @media (max-width: 768px) {
            .header {
                padding: 0 1rem;
            }

            .desktop-menu {
                display: none;
            }

            .mobile-menu-toggle {
                display: block;
            }

            .theme-toggle-header {
                order: -1;
                margin-left: 0.5rem;
            }

            .logo {
                font-size: 1.1rem;
            }

            .container {
                padding: 1rem;
            }

            .card {
                padding: 1.5rem;
            }

            .btn-group {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }

            .games-grid {
                grid-template-columns: 1fr;
            }

            .game-board {
                max-width: 350px;
            }

            .game-cell {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .game-card {
                padding: 1.5rem;
            }

            .theme-btn {
                width: 35px;
                height: 35px;
                font-size: 1rem;
            }
        }

        /* ==================== ACCESSIBILITY ==================== */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0,0,0,0);
            border: 0;
        }

        :focus-visible {
            outline: 3px solid var(--accent);
            outline-offset: 2px;
            border-radius: 8px;
        }

        /* ==================== LOADING ANIMATION ==================== */
        .loader {
            display: none;
            width: 40px;
            height: 40px;
            border: 3px solid var(--border);
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin 1s cubic-bezier(0.68, -0.55, 0.27, 1.55) infinite;
            margin: 2rem auto;
        }

        .loader.show {
            display: block;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ==================== CUSTOM SCROLLBAR ==================== */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }
    </style>
</head>
<body>
    <!-- Skip Link -->
    <a href="#main" class="sr-only">Ø±Ø¯ Ø´Ø¯Ù† Ø¨Ù‡ Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ</a>

    <!-- Header -->
    <header class="header" role="banner">
        <div class="logo" aria-label="Ù„ÙˆÚ¯Ùˆ Ø³Ø§ÛŒØª">ğŸ”§ Ù…ØªÙ† Ùˆ Ø¨Ø§Ø²ÛŒ 3.0</div>
        
        <nav class="desktop-menu" role="navigation" aria-label="Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ">
            <a href="#" class="nav-link active" data-tab="keyboard" aria-current="page">âŒ¨ï¸ ØªØ§ÛŒÙ¾</a>
            <a href="#" class="nav-link" data-tab="crypto">ğŸ” Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ</a>
            <a href="#" class="nav-link" data-tab="pinglish">ğŸŒ ÙÛŒÙ†Ú¯Ù„ÛŒØ´</a>
            <a href="#" class="nav-link" data-tab="games">ğŸ® Ø¨Ø§Ø²ÛŒâ€ŒÙ‡Ø§</a>
            <a href="#" class="nav-link" data-tab="tools">ğŸ› ï¸ Ø§Ø¨Ø²Ø§Ø±</a>
            <a href="#" class="nav-link" data-tab="history">ğŸ“œ ØªØ§Ø±ÛŒØ®Ú†Ù‡</a>
            <a href="#" class="nav-link" data-tab="library">â­ Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡</a>
        </nav>

        <div class="theme-toggle-header" role="group" aria-label="ØªØºÛŒÛŒØ± ØªÙ…">
            <button class="theme-btn active" data-theme="light" title="ØªÙ… Ø±ÙˆØ´Ù†" aria-label="ØªÙ… Ø±ÙˆØ´Ù†">â˜€ï¸</button>
            <button class="theme-btn" data-theme="dark" title="ØªÙ… ØªØ§Ø±ÛŒÚ©" aria-label="ØªÙ… ØªØ§Ø±ÛŒÚ©">ğŸŒ™</button>
            <button class="theme-btn" data-theme="auto" title="ØªÙ… Ø³ÛŒØ³ØªÙ…" aria-label="ØªÙ… Ø³ÛŒØ³ØªÙ…">ğŸ”„</button>
        </div>

        <button class="mobile-menu-toggle" aria-label="Ù…Ù†ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„" onclick="toggleMobileMenu()">
            <span class="hamburger"></span>
        </button>
    </header>

    <!-- Mobile Menu -->
    <div class="mobile-menu-overlay" id="mobileOverlay" onclick="toggleMobileMenu()">
        <div class="mobile-menu-drawer" onclick="event.stopPropagation()">
            <ul class="mobile-nav-list">
                <li class="mobile-nav-item"><a href="#" class="mobile-nav-link active" data-tab="keyboard" onclick="handleMobileLink(this)">âŒ¨ï¸ ØªØ§ÛŒÙ¾ Ø§Ø´ØªØ¨Ø§Ù‡</a></li>
                <li class="mobile-nav-item"><a href="#" class="mobile-nav-link" data-tab="crypto" onclick="handleMobileLink(this)">ğŸ” Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ</a></li>
                <li class="mobile-nav-item"><a href="#" class="mobile-nav-link" data-tab="pinglish" onclick="handleMobileLink(this)">ğŸŒ ÙÛŒÙ†Ú¯Ù„ÛŒØ´</a></li>
                <li class="mobile-nav-item"><a href="#" class="mobile-nav-link" data-tab="games" onclick="handleMobileLink(this)">ğŸ® Ø¨Ø§Ø²ÛŒâ€ŒÙ‡Ø§</a></li>
                <li class="mobile-nav-item"><a href="#" class="mobile-nav-link" data-tab="tools" onclick="handleMobileLink(this)">ğŸ› ï¸ Ø§Ø¨Ø²Ø§Ø±</a></li>
                <li class="mobile-nav-item"><a href="#" class="mobile-nav-link" data-tab="history" onclick="handleMobileLink(this)">ğŸ“œ ØªØ§Ø±ÛŒØ®Ú†Ù‡</a></li>
                <li class="mobile-nav-item"><a href="#" class="mobile-nav-link" data-tab="library" onclick="handleMobileLink(this)">â­ Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡</a></li>
            </ul>
        </div>
    </div>

    <!-- Main Content -->
    <main id="main" class="container" role="main">
        <!-- Keyboard Tab -->
        <section id="keyboard" class="tab-content active" role="tabpanel" aria-labelledby="tab-keyboard">
            <div class="card">
                <h2>âŒ¨ï¸ ØªØ¨Ø¯ÛŒÙ„ ØªØ§ÛŒÙ¾ Ø§Ø´ØªØ¨Ø§Ù‡ Ú©ÛŒØ¨ÙˆØ±Ø¯</h2>
                <p>ÙˆÙ‚ØªÛŒ Ø²Ø¨Ø§Ù† Ú©ÛŒØ¨ÙˆØ±Ø¯ Ø±ÙˆÛŒ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ Ø§Ø³Øª Ùˆ Ø´Ù…Ø§ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ ÙØ§Ø±Ø³ÛŒ Ø±Ø§ Ù…ÛŒâ€ŒØ²Ù†ÛŒØ¯</p>
                
                <div class="input-group">
                    <label for="kb-input">ğŸ“¥ Ù…ØªÙ† Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ Ø§Ø´ØªØ¨Ø§Ù‡:</label>
                    <textarea id="kb-input" class="input-field" placeholder="Ù…Ø«Ù„Ø§Ù‹: sShk ÛŒØ§ s alam" aria-describedby="kb-help"></textarea>
                </div>
                
                <div class="input-group">
                    <label for="kb-output">ğŸ“¤ Ù…ØªÙ† ÙØ§Ø±Ø³ÛŒ ØµØ­ÛŒØ­:</label>
                    <textarea id="kb-output" class="input-field" readonly placeholder="Ø®Ø±ÙˆØ¬ÛŒ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯..." aria-live="polite"></textarea>
                </div>
                
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="clearKeyboard()">ğŸ—‘ï¸ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†</button>
                    <button class="btn btn-success" onclick="copyToClipboard(kbOutput.value, 'Ø®Ø±ÙˆØ¬ÛŒ Ú©Ù¾ÛŒ Ø´Ø¯!')">ğŸ“‹ Ú©Ù¾ÛŒ</button>
                    <button class="btn btn-warning" onclick="addToLibrary('keyboard')">â­ Ø°Ø®ÛŒØ±Ù‡</button>
                </div>
            </div>
        </section>

        <!-- Crypto Tab -->
        <section id="crypto" class="tab-content" role="tabpanel" aria-labelledby="tab-crypto">
            <div class="card">
                <h2>ğŸ” Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ AES-256</h2>
                <p>Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ Ø¨Ø§ Ú©Ù„ÛŒØ¯ Ø¯Ù„Ø®ÙˆØ§Ù‡ Ùˆ ØªØ´Ø®ÛŒØµ Ø®ÙˆØ¯Ú©Ø§Ø± Ø²Ø¨Ø§Ù†</p>
                
                <div class="input-group">
                    <label for="crypto-input">ğŸ“¥ Ù…ØªÙ† ÙˆØ±ÙˆØ¯ÛŒ:</label>
                    <textarea id="crypto-input" class="input-field" placeholder="Ù…ØªÙ† Ø®ÙˆØ¯ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯..." aria-describedby="crypto-help"></textarea>
                </div>
                
                <div class="input-group">
                    <label for="crypto-key">ğŸ”‘ Ú©Ù„ÛŒØ¯ Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ):</label>
                    <input type="password" id="crypto-key" class="input-field" style="min-height: 50px;" placeholder="Ø¯ÙØ¹Ø§Øª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯">
                </div>
                
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="encryptText()">ğŸ”’ Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ</button>
                    <button class="btn btn-secondary" onclick="decryptPrompt()">ğŸ”“ Ø±Ù…Ø²Ú¯Ø´Ø§ÛŒÛŒ</button>
                    <button class="btn btn-danger" onclick="clearCrypto()">ğŸ—‘ï¸ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†</button>
                </div>
                
                <div id="crypto-output" class="game-container">
                    <h4>ğŸ”‘ Ú©Ø¯ Ø±Ù…Ø²:</h4>
                    <textarea id="crypto-code" class="input-field" readonly></textarea>
                    <button class="btn btn-success" onclick="copyToClipboard(cryptoCode.value, 'Ú©Ø¯ Ø±Ù…Ø² Ú©Ù¾ÛŒ Ø´Ø¯!')">ğŸ“‹ Ú©Ù¾ÛŒ Ú©Ø¯</button>
                </div>
            </div>
        </section>

        <!-- Pinglish Tab -->
        <section id="pinglish" class="tab-content" role="tabpanel" aria-labelledby="tab-pinglish">
            <div class="card">
                <h2>ğŸŒ ØªØ¨Ø¯ÛŒÙ„ ÙÛŒÙ†Ú¯Ù„ÛŒØ´ â†” ÙØ§Ø±Ø³ÛŒ</h2>
                <p>ØªØ´Ø®ÛŒØµ Ø®ÙˆØ¯Ú©Ø§Ø± Ùˆ ØªØ¨Ø¯ÛŒÙ„ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¨Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Ù„Ù‡Ø¬Ù‡â€ŒÙ‡Ø§</p>
                
                <div class="input-group">
                    <label for="pinglish-input">ğŸ“¥ Ù…ØªÙ† ÙˆØ±ÙˆØ¯ÛŒ:</label>
                    <textarea id="pinglish-input" class="input-field" placeholder="Ù…ØªÙ† ÙÛŒÙ†Ú¯Ù„ÛŒØ´ ÛŒØ§ ÙØ§Ø±Ø³ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯..." aria-describedby="pinglish-help"></textarea>
                </div>
                
                <div class="input-group">
                    <label for="pinglish-output">ğŸ“¤ Ù…ØªÙ† Ø®Ø±ÙˆØ¬ÛŒ:</label>
                    <textarea id="pinglish-output" class="input-field" readonly aria-live="polite"></textarea>
                </div>
                
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="detectPinglish()">ğŸ” ØªØ´Ø®ÛŒØµ Ø®ÙˆØ¯Ú©Ø§Ø±</button>
                    <button class="btn btn-secondary" onclick="pinglishToFarsi()">ÙÛŒÙ†Ú¯Ù„ÛŒØ´ â† ÙØ§Ø±Ø³ÛŒ</button>
                    <button class="btn btn-secondary" onclick="farsiToPinglish()">ÙØ§Ø±Ø³ÛŒ â† ÙÛŒÙ†Ú¯Ù„ÛŒØ´</button>
                    <button class="btn btn-success" onclick="copyToClipboard(pinglishOutput.value, 'Ø®Ø±ÙˆØ¬ÛŒ Ú©Ù¾ÛŒ Ø´Ø¯!')">ğŸ“‹ Ú©Ù¾ÛŒ</button>
                    <button class="btn btn-warning" onclick="addToLibrary('pinglish')">â­ Ø°Ø®ÛŒØ±Ù‡</button>
                </div>
            </div>
        </section>

        <!-- Games Tab -->
        <section id="games" class="tab-content" role="tabpanel" aria-labelledby="tab-games">
            <div class="card">
                <h2>ğŸ® Ø¨Ø§Ø²ÛŒâ€ŒÙ‡Ø§ÛŒ Ú†Ù†Ø¯Ù†ÙØ±Ù‡ Ù‡ÙˆØ´Ù…Ù†Ø¯</h2>
                <p>Ø¨Ø§Ø²ÛŒâ€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ø± ÛŒÚ© Ú¯ÙˆØ´ÛŒ Ø¨Ø§ Ø¯ÙˆØ³ØªØ§Ù† ÛŒØ§ Ø±Ø¨Ø§Øª Ø¨Ø§Ø²ÛŒ Ú©Ù†ÛŒØ¯</p>
                
                <div class="games-grid">
                    <div class="game-card" onclick="startGame('tictactoe')" role="button" tabindex="0" aria-label="Ø¨Ø§Ø²ÛŒ ØªÛŒÚ© ØªØ§Ú© ØªÙˆ">
                        <h3>âŒ â­• ØªÛŒÚ©â€ŒØªØ§Ú©â€ŒØªÙˆ</h3>
                        <p>Ø¨Ø§Ø²ÛŒ Ú©Ù„Ø§Ø³ÛŒÚ© Ø¯Ùˆ Ù†ÙØ±Ù‡. Ø®Ø· Ø³Ù‡â€ŒØªØ§ÛŒÛŒ Ø¨Ø³Ø§Ø²ÛŒØ¯!</p>
                        <div class="game-players">
                            <span class="player-badge active">Û² Ù†ÙØ±Ù‡</span>
                            <span class="player-badge">Ø¨Ø§ Ø±Ø¨Ø§Øª ğŸ¤–</span>
                        </div>
                    </div>

                    <div class="game-card" onclick="startGame('connect4')" role="button" tabindex="0" aria-label="Ø¨Ø§Ø²ÛŒ Connect 4">
                        <h3>ğŸ”´ ğŸ”µ Connect 4</h3>
                        <p>Ú†Ù‡Ø§Ø± Ù…Ù‡Ø±Ù‡ Ù‡Ù…â€ŒØ±Ù†Ú¯ Ø¯Ø± ÛŒÚ© Ø®Ø·. Ú†Ø§Ù„Ø´â€ŒØ¨Ø±Ø§Ù†Ú¯ÛŒØ²!</p>
                        <div class="game-players">
                            <span class="player-badge active">Û² Ù†ÙØ±Ù‡</span>
                        </div>
                    </div>

                    <div class="game-card" onclick="startGame('ludo')" role="button" tabindex="0" aria-label="Ø¨Ø§Ø²ÛŒ Ù…Ù†Ú†">
                        <h3>ğŸ² Ù…Ù†Ú† (Ludo)</h3>
                        <p>Ø¨Ø§Ø²ÛŒ Ù…Ø­Ø¨ÙˆØ¨ Ø§ÛŒØ±Ø§Ù†ÛŒ ØªØ§ Û´ Ù†ÙØ±Ù‡!</p>
                        <div class="game-players">
                            <span class="player-badge active">Û´ Ù†ÙØ±Ù‡</span>
                            <span class="player-badge">Û³ Ù†ÙØ±Ù‡</span>
                            <span class="player-badge">Û² Ù†ÙØ±Ù‡</span>
                        </div>
                    </div>

                    <div class="game-card" onclick="startGame('rockpaperscissors')" role="button" tabindex="0" aria-label="Ø¨Ø§Ø²ÛŒ Ø³Ù†Ú¯ Ú©Ø§ØºØ° Ù‚ÛŒÚ†ÛŒ">
                        <h3>âœ‹ Ø³Ù†Ú¯â€ŒÚ©Ø§ØºØ°-Ù‚ÛŒÚ†ÛŒ</h3>
                        <p>Ø¨Ø§Ø²ÛŒ Ù…Ø­Ø¨ÙˆØ¨ Ø¨Ø§ AI Ù‡ÙˆØ´Ù…Ù†Ø¯ Cohere</p>
                        <div class="game-players">
                            <span class="player-badge active">ØªÚ©â€ŒÙ†ÙØ±Ù‡ ğŸ¤–</span>
                            <span class="player-badge">Û² Ù†ÙØ±Ù‡</span>
                        </div>
                    </div>

                    <div class="game-card" onclick="startGame('choob')" role="button" tabindex="0" aria-label="Ø¨Ø§Ø²ÛŒ Ú†Ù„Ø§Ù‚">
                        <h3>ğŸªœ Ø¨Ø§Ø²ÛŒ Ú†Ù„Ø§Ù‚</h3>
                        <p>Ø¨Ø§Ø²ÛŒ ÙÚ©Ø±ÛŒ Ø§ÛŒØ±Ø§Ù†ÛŒ. Ø§Ø² Ú†Ù„Ø§Ù‚â€ŒÙ‡Ø§ Ø¨Ø§Ù„Ø§ Ø¨Ø±Ùˆ!</p>
                        <div class="game-players">
                            <span class="player-badge active">Û² Ù†ÙØ±Ù‡</span>
                            <span class="player-badge">Ø¨Ø§ Ø±Ø¨Ø§Øª ğŸ¤–</span>
                        </div>
                    </div>

                    <div class="game-card" onclick="startGame('maze')" role="button" tabindex="0" aria-label="Ø¨Ø§Ø²ÛŒ Ù„Ø§Ø¨ÛŒØ±Ù†Øª">
                        <h3>ğŸŒ€ MAZE (Ù„Ø§Ø¨ÛŒØ±Ù†Øª)</h3>
                        <p>Ø­Ù„ Ù„Ø§Ø¨ÛŒØ±Ù†Øª Ù¾ÛŒÚ†ÛŒØ¯Ù‡ Ø¨Ø§ AI</p>
                        <div class="game-players">
                            <span class="player-badge active">ØªÚ©â€ŒÙ†ÙØ±Ù‡ ğŸ¤–</span>
                        </div>
                    </div>
                </div>

                <!-- Game Boards -->
                <div id="game-tictactoe" class="game-container"></div>
                <div id="game-connect4" class="game-container"></div>
                <div id="game-ludo" class="game-container"></div>
                <div id="game-rockpaperscissors" class="game-container"></div>
                <div id="game-choob" class="game-container"></div>
                <div id="game-maze" class="game-container"></div>
            </div>
        </section>

        <!-- Tools Tab -->
        <section id="tools" class="tab-content" role="tabpanel" aria-labelledby="tab-tools">
            <div class="card">
                <h2>ğŸ› ï¸ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ</h2>
                
                <h3>ğŸ”‘ ØªÙˆÙ„ÛŒØ¯ Ù¾Ø³ÙˆØ±Ø¯ ØªØµØ§Ø¯ÙÛŒ Ù‚ÙˆÛŒ</h3>
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="generatePassword()">ğŸ² ØªÙˆÙ„ÛŒØ¯ Ù¾Ø³ÙˆØ±Ø¯</button>
                    <button class="btn btn-secondary" onclick="copyToClipboard(passwordOutput.value, 'Ù¾Ø³ÙˆØ±Ø¯ Ú©Ù¾ÛŒ Ø´Ø¯!')">ğŸ“‹ Ú©Ù¾ÛŒ</button>
                </div>
                <textarea id="password-output" class="input-field" readonly style="min-height: 60px; margin-top: 1rem;"></textarea>
                
                <hr style="margin: 3rem 0; border: 1px solid var(--border);">
                
                <h3>ğŸ§¹ Ø§ØµÙ„Ø§Ø­ Ø®ÙˆØ¯Ú©Ø§Ø± Ù…ØªÙ† ÙØ§Ø±Ø³ÛŒ</h3>
                <div class="input-group">
                    <textarea id="cleaner-input" class="input-field" placeholder="Ù…ØªÙ† Ø¨Ø±Ø§ÛŒ Ø§ØµÙ„Ø§Ø­..."></textarea>
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.75rem; margin: 1rem 0;">
                    <label><input type="checkbox" id="fix-spaces" checked> Ø­Ø°Ù ÙØ§ØµÙ„Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ</label>
                    <label><input type="checkbox" id="fix-arabic" checked> Ø§ØµÙ„Ø§Ø­ ÙŠ/Ùƒ Ø¹Ø±Ø¨ÛŒ</label>
                    <label><input type="checkbox" id="fix-punctuation" checked> Ø¹Ù„Ø§Ø¦Ù… ÙØ§Ø±Ø³ÛŒ</label>
                </div>
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="cleanText()">âœ¨ Ø§ØµÙ„Ø§Ø­ Ù…ØªÙ†</button>
                    <button class="btn btn-secondary" onclick="copyToClipboard(cleanerInput.value, 'Ù…ØªÙ† Ø§ØµÙ„Ø§Ø­â€ŒØ´Ø¯Ù‡ Ú©Ù¾ÛŒ Ø´Ø¯!')">ğŸ“‹ Ú©Ù¾ÛŒ</button>
                </div>
            </div>
        </section>

        <!-- History Tab -->
        <section id="history" class="tab-content" role="tabpanel" aria-labelledby="tab-history">
            <div class="card">
                <h2>ğŸ“œ ØªØ§Ø±ÛŒØ®Ú†Ù‡ ØªØ¨Ø¯ÛŒÙ„â€ŒÙ‡Ø§</h2>
                <p>Ø¢Ø®Ø±ÛŒÙ† ÛµÛ° ØªØ¨Ø¯ÛŒÙ„ Ø´Ù…Ø§ (ÙÙ‚Ø· Ø¯Ø± Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø´Ù…Ø§ Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯)</p>
                <div class="btn-group">
                    <button class="btn btn-danger" onclick="clearHistory()">ğŸ—‘ï¸ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ØªØ§Ø±ÛŒØ®Ú†Ù‡</button>
                    <button class="btn btn-secondary" onclick="exportHistory()">ğŸ“¥ Ø®Ø±ÙˆØ¬ÛŒ CSV</button>
                </div>
                <div class="history-panel" id="history-list"></div>
            </div>
        </section>

        <!-- Library Tab -->
        <section id="library" class="tab-content" role="tabpanel" aria-labelledby="tab-library">
            <div class="card">
                <h2>â­ Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Ø´Ø®ØµÛŒ</h2>
                <p>Ù…ØªÙ†â€ŒÙ‡Ø§ÛŒ Ù…Ù‡Ù… Ø´Ù…Ø§ Ø¨Ø§ Ø¹Ù†ÙˆØ§Ù† Ùˆ Ø¨Ø±Ú†Ø³Ø¨â€ŒÚ¯Ø°Ø§Ø±ÛŒ</p>
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="addToLibraryPrompt()">â• Ø§ÙØ²ÙˆØ¯Ù† Ø¬Ø¯ÛŒØ¯</button>
                </div>
                <div id="library-grid" style="margin-top: 1rem;"></div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer style="text-align: center; padding: 2rem; background: var(--bg-secondary); margin-top: 3rem; border-top: 1px solid var(--border);">
        <p style="color: var(--text-secondary);">ğŸš€ Ø§Ø¨Ø²Ø§Ø± Ù…ØªÙ† Ùˆ Ø¨Ø§Ø²ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ 3.0 | Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ø¨Ø§ â¤ï¸ Ùˆ â˜• | Ù†Ø³Ø®Ù‡ ÙÙˆÙ‚â€ŒØ­Ø±ÙÙ‡â€ŒØ§ÛŒ</p>
        <p style="margin-top: 0.5rem; font-size: 0.9rem;">
            <a href="#" style="color: var(--accent); text-decoration: none;">Ø­Ø±ÛŒÙ… Ø®ØµÙˆØµÛŒ</a> | 
            <a href="#" style="color: var(--accent); text-decoration: none;">API Ø¨Ø±Ø§ÛŒ ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ú¯Ø§Ù†</a>
        </p>
    </footer>

    <script>
        // ==================== COHERE API KEY (WARNING!) ==================== */
        const COHERE_API_KEY = 'qX7sKhEWrDcAw0PZVs6zmjMQry3oTXDqxL39jT3O';
        const COHERE_API_URL = 'https://api.cohere.ai/v1/generate';

        // ==================== THEME SYSTEM ==================== */
        const themeButtons = document.querySelectorAll('.theme-btn');
        const html = document.documentElement;
        const savedTheme = localStorage.getItem('theme') || 'dark';

        function setTheme(theme) {
            html.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            
            themeButtons.forEach(btn => {
                btn.classList.toggle('active', btn.dataset.theme === theme);
                btn.setAttribute('aria-pressed', btn.dataset.theme === theme);
            });
            
            // Animate theme change
            document.body.style.transition = 'background 0.5s ease';
        }

        themeButtons.forEach(btn => {
            btn.addEventListener('click', () => setTheme(btn.dataset.theme));
        });

        setTheme(savedTheme);

        // ==================== MENU SYSTEM ==================== */
        const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
        const mobileOverlay = document.getElementById('mobileOverlay');

        function toggleMobileMenu() {
            const isOpen = mobileMenuToggle.classList.contains('active');
            
            if (isOpen) {
                mobileMenuToggle.classList.remove('active');
                mobileOverlay.classList.remove('active');
                document.body.style.overflow = '';
                mobileMenuToggle.setAttribute('aria-expanded', 'false');
            } else {
                mobileMenuToggle.classList.add('active');
                mobileOverlay.classList.add('active');
                document.body.style.overflow = 'hidden';
                mobileMenuToggle.setAttribute('aria-expanded', 'true');
            }
        }

        function handleMobileLink(link) {
            const tab = link.dataset.tab;
            
            // Update desktop menu
            document.querySelectorAll('.nav-link').forEach(l => {
                l.classList.remove('active');
                l.removeAttribute('aria-current');
            });
            const desktopLink = document.querySelector(`.nav-link[data-tab="${tab}"]`);
            if (desktopLink) {
                desktopLink.classList.add('active');
                desktopLink.setAttribute('aria-current', 'page');
            }
            
            // Update mobile menu
            document.querySelectorAll('.mobile-nav-link').forEach(l => l.classList.remove('active'));
            link.classList.add('active');
            
            // Switch tab
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
                if (content.id === tab) {
                    content.classList.add('active');
                }
            });
            
            toggleMobileMenu();
            
            // Load data
            if (tab === 'history') loadHistory();
            if (tab === 'library') loadLibrary();
        }

        // Desktop menu
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const tab = link.dataset.tab;
                
                document.querySelectorAll('.nav-link').forEach(l => {
                    l.classList.remove('active');
                    l.removeAttribute('aria-current');
                });
                link.classList.add('active');
                link.setAttribute('aria-current', 'page');
                
                document.querySelectorAll('.mobile-nav-link').forEach(l => l.classList.remove('active'));
                const mobileLink = document.querySelector(`.mobile-nav-link[data-tab="${tab}"]`);
                if (mobileLink) mobileLink.classList.add('active');
                
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                    if (content.id === tab) content.classList.add('active');
                });
                
                if (tab === 'history') loadHistory();
                if (tab === 'library') loadLibrary();
            });
        });

        // ==================== COHERE API ==================== */
        async function callCohere(prompt, maxTokens = 50) {
            try {
                const response = await fetch(COHERE_API_URL, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${COHERE_API_KEY}`,
                        'Content-Type': 'application/json',
                        'Cohere-Version': '2022-12-06'
                    },
                    body: JSON.stringify({
                        model: 'command',
                        prompt: prompt,
                        max_tokens: maxTokens,
                        temperature: 0.7,
                        stop_sequences: ["\n"]
                    })
                });
                
                const data = await response.json();
                return data.generations?.[0]?.text?.trim() || 'random';
            } catch (error) {
                console.error('Cohere API Error:', error);
                showToast('âš ï¸ Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„ Ø¨Ù‡ AI', 'error');
                return 'random';
            }
        }

        // ==================== GAME SYSTEM ==================== */
        const currentGames = {};

        function startGame(gameType) {
            // Hide all game containers
            document.querySelectorAll('.game-container').forEach(container => {
                container.classList.remove('active');
            });
            
            // Show selected game
            const gameContainer = document.getElementById(`game-${gameType}`);
            if (!gameContainer) return;
            
            gameContainer.classList.add('active');
            gameContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            
            // Initialize game
            switch(gameType) {
                case 'tictactoe':
                    initTicTacToe();
                    break;
                case 'connect4':
                    initConnect4();
                    break;
                case 'ludo':
                    initLudo();
                    break;
                case 'rockpaperscissors':
                    initRockPaperScissors();
                    break;
                case 'choob':
                    initChoob();
                    break;
                case 'maze':
                    initMaze();
                    break;
            }
        }

        function initTicTacToe() {
            const container = document.getElementById('game-tictactoe');
            container.innerHTML = `
                <h3>âŒ â­• ØªÛŒÚ©â€ŒØªØ§Ú©â€ŒØªÙˆ</h3>
                <div class="game-controls">
                    <button class="btn btn-primary" onclick="setGameMode('tictactoe', 'pvp')">ğŸ‘¥ Û² Ù†ÙØ±Ù‡</button>
                    <button class="btn btn-secondary" onclick="setGameMode('tictactoe', 'ai')">ğŸ¤– Ø¨Ø§ Ø±Ø¨Ø§Øª</button>
                    <button class="btn btn-danger" onclick="resetGame('tictactoe')">ğŸ”„ Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯</button>
                </div>
                <div class="game-info" id="tictactoe-info">Ù†ÙˆØ¨Øª Ø¨Ø§Ø²ÛŒÚ©Ù† Û± (âŒ)</div>
                <div class="game-board" id="tictactoe-board" style="grid-template-columns: repeat(3, 1fr);"></div>
            `;
            
            createBoard('tictactoe', 3, 3);
            currentGames.tictactoe = {
                board: Array(9).fill(null),
                currentPlayer: 'X',
                mode: 'pvp',
                isGameOver: false
            };
            updateGameInfo('tictactoe');
        }

        function createBoard(gameType, rows, cols) {
            const board = document.getElementById(`${gameType}-board`);
            board.innerHTML = '';
            board.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
            
            for (let i = 0; i < rows * cols; i++) {
                const cell = document.createElement('div');
                cell.className = 'game-cell';
                cell.dataset.index = i;
                cell.setAttribute('role', 'button');
                cell.setAttribute('aria-label', `Ø³Ù„ÙˆÙ„ ${i + 1}`);
                cell.onclick = () => handleCellClick(gameType, i);
                board.appendChild(cell);
            }
        }

        function handleCellClick(gameType, index) {
            const game = currentGames[gameType];
            if (!game || game.isGameOver) return;
            
            if (gameType === 'tictactoe') {
                if (game.board[index]) return;
                
                makeMove(gameType, index, game.currentPlayer);
                
                if (checkWinner(gameType)) {
                    endGame(gameType, `Ø¨Ø§Ø²ÛŒÚ©Ù† ${game.currentPlayer === 'X' ? 'Û±' : 'Û²'} Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯!`);
                } else if (game.board.every(cell => cell)) {
                    endGame(gameType, 'Ø¨Ø§Ø²ÛŒ Ù…Ø³Ø§ÙˆÛŒ Ø´Ø¯!');
                } else {
                    switchPlayer(gameType);
                    
                    if (game.mode === 'ai' && game.currentPlayer === 'O') {
                        setTimeout(() => aiMoveTicTacToe(), 500);
                    }
                }
            }
        }

        function makeMove(gameType, index, player) {
            const game = currentGames[gameType];
            game.board[index] = player;
            
            const cell = document.querySelector(`#${gameType}-board .game-cell[data-index="${index}"]`);
            cell.textContent = player === 'X' ? 'âŒ' : 'â­•';
            cell.classList.add(player.toLowerCase());
        }

        function switchPlayer(gameType) {
            const game = currentGames[gameType];
            game.currentPlayer = game.currentPlayer === 'X' ? 'O' : 'X';
            updateGameInfo(gameType);
        }

        function updateGameInfo(gameType) {
            const game = currentGames[gameType];
            const info = document.getElementById(`${gameType}-info`);
            const playerName = game.currentPlayer === 'X' ? 'Û±' : 'Û²';
            info.textContent = `Ù†ÙˆØ¨Øª Ø¨Ø§Ø²ÛŒÚ©Ù† ${playerName} (${game.currentPlayer === 'X' ? 'âŒ' : 'â­•'})`;
        }

        function checkWinner(gameType) {
            const game = currentGames[gameType];
            const board = game.board;
            
            const winPatterns = [
                [0,1,2], [3,4,5], [6,7,8], // rows
                [0,3,6], [1,4,7], [2,5,8], // cols
                [0,4,8], [2,4,6] // diagonals
            ];
            
            return winPatterns.some(pattern => {
                const [a,b,c] = pattern;
                return board[a] && board[a] === board[b] && board[a] === board[c];
            });
        }

        function endGame(gameType, message) {
            const game = currentGames[gameType];
            game.isGameOver = true;
            document.getElementById(`${gameType}-info`).textContent = message;
            showToast(message, 'success');
        }

        function resetGame(gameType) {
            if (gameType === 'tictactoe') {
                initTicTacToe();
            }
        }

        function setGameMode(gameType, mode) {
            if (!currentGames[gameType]) return;
            currentGames[gameType].mode = mode;
            resetGame(gameType);
            showToast(`Ø­Ø§Ù„Øª Ø¨Ø§Ø²ÛŒ: ${mode === 'ai' ? 'Ø¨Ø§ Ø±Ø¨Ø§Øª ğŸ¤–' : 'Ø¯Ùˆ Ù†ÙØ±Ù‡ ğŸ‘¥'}`, 'info');
        }

        async function aiMoveTicTacToe() {
            const game = currentGames.tictactoe;
            if (game.isGameOver || game.currentPlayer !== 'O') return;
            
            const emptyCells = game.board.map((cell, index) => cell ? null : index).filter(i => i !== null);
            if (emptyCells.length === 0) return;
            
            const prompt = `You are playing Tic-Tac-Toe as O. Board state: ${game.board.map(c => c || '-').join('')}. Choose best move (0-8):`;
            const aiResponse = await callCohere(prompt, 3);
            
            let move = parseInt(aiResponse);
            if (isNaN(move) || game.board[move]) {
                move = emptyCells[Math.floor(Math.random() * emptyCells.length)];
            }
            
            handleCellClick('tictactoe', move);
        }

        // ==================== CONNECT 4 ==================== */
        function initConnect4() {
            const container = document.getElementById('game-connect4');
            container.innerHTML = `
                <h3>ğŸ”´ ğŸ”µ Connect 4</h3>
                <div class="game-controls">
                    <button class="btn btn-primary" onclick="setGameMode('connect4', 'pvp')">ğŸ‘¥ Û² Ù†ÙØ±Ù‡</button>
                    <button class="btn btn-danger" onclick="resetGame('connect4')">ğŸ”„ Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯</button>
                </div>
                <div class="game-info" id="connect4-info">Ù†ÙˆØ¨Øª Ø¨Ø§Ø²ÛŒÚ©Ù† Û± (Ù‚Ø±Ù…Ø²)</div>
                <div class="game-board" id="connect4-board" style="grid-template-columns: repeat(7, 1fr);"></div>
            `;
            
            createBoard('connect4', 6, 7);
            currentGames.connect4 = {
                board: Array(42).fill(null),
                currentPlayer: 'ğŸ”´',
                isGameOver: false,
                columnHeights: Array(7).fill(0)
            };
            updateGameInfo('connect4');
        }

        function makeConnect4Move(col) {
            const game = currentGames.connect4;
            if (game.isGameOver) return;
            
            const row = 5 - game.columnHeights[col];
            if (row < 0) return;
            
            const index = row * 7 + col;
            game.board[index] = game.currentPlayer;
            
            const cell = document.querySelector(`#connect4-board .game-cell[data-index="${index}"]`);
            cell.textContent = game.currentPlayer;
            game.columnHeights[col]++;
            
            if (checkConnect4Winner()) {
                endGame('connect4', `Ø¨Ø§Ø²ÛŒÚ©Ù† ${game.currentPlayer} Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯!`);
            } else if (game.board.every(cell => cell)) {
                endGame('connect4', 'Ø¨Ø§Ø²ÛŒ Ù…Ø³Ø§ÙˆÛŒ Ø´Ø¯!');
            } else {
                game.currentPlayer = game.currentPlayer === 'ğŸ”´' ? 'ğŸ”µ' : 'ğŸ”´';
                updateGameInfo('connect4');
            }
        }

        function updateGameInfo(gameType) {
            const game = currentGames[gameType];
            const info = document.getElementById(`${gameType}-info`);
            
            if (gameType === 'connect4') {
                info.textContent = `Ù†ÙˆØ¨Øª Ø¨Ø§Ø²ÛŒÚ©Ù† ${game.currentPlayer === 'ğŸ”´' ? 'Û±' : 'Û²'} (${game.currentPlayer})`;
            } else if (gameType === 'tictactoe') {
                const playerName = game.currentPlayer === 'X' ? 'Û±' : 'Û²';
                info.textContent = `Ù†ÙˆØ¨Øª Ø¨Ø§Ø²ÛŒÚ©Ù† ${playerName} (${game.currentPlayer === 'X' ? 'âŒ' : 'â­•'})`;
            }
        }

        function checkConnect4Winner() {
            const game = currentGames.connect4;
            const board = game.board;
            const rows = 6, cols = 7;
            
            // Check all directions
            for (let r = 0; r < rows; r++) {
                for (let c = 0; c < cols; c++) {
                    const i = r * cols + c;
                    if (!board[i]) continue;
                    
                    // Horizontal
                    if (c <= cols - 4 && board[i] === board[i+1] && board[i] === board[i+2] && board[i] === board[i+3]) return true;
                    
                    // Vertical
                    if (r <= rows - 4 && board[i] === board[i+cols] && board[i] === board[i+2*cols] && board[i] === board[i+3*cols]) return true;
                    
                    // Diagonal down-right
                    if (r <= rows - 4 && c <= cols - 4 && board[i] === board[i+cols+1] && board[i] === board[i+2*cols+2] && board[i] === board[i+3*cols+3]) return true;
                    
                    // Diagonal down-left
                    if (r <= rows - 4 && c >= 3 && board[i] === board[i+cols-1] && board[i] === board[i+2*cols-2] && board[i] === board[i+3*cols-3]) return true;
                }
            }
            
            return false;
        }

        // ==================== ROCK PAPER SCISSORS ==================== */
        function initRockPaperScissors() {
            const container = document.getElementById('game-rockpaperscissors');
            container.innerHTML = `
                <h3>âœ‹ ğŸª¨ ğŸ“„ âœ‚ï¸ Ø³Ù†Ú¯â€ŒÚ©Ø§ØºØ°-Ù‚ÛŒÚ†ÛŒ</h3>
                <div class="game-controls">
                    <button class="btn btn-primary" onclick="setGameMode('rps', 'pvp')">ğŸ‘¥ Û² Ù†ÙØ±Ù‡</button>
                    <button class="btn btn-secondary" onclick="setGameMode('rps', 'ai')">ğŸ¤– Ø¨Ø§ Ø±Ø¨Ø§Øª</button>
                </div>
                <div class="game-info" id="rps-info"></div>
                <div class="btn-group" id="rps-buttons">
                    <button class="btn btn-primary" onclick="playRPS('rock')">ğŸª¨ Ø³Ù†Ú¯</button>
                    <button class="btn btn-primary" onclick="playRPS('paper')">ğŸ“„ Ú©Ø§ØºØ°</button>
                    <button class="btn btn-primary" onclick="playRPS('scissors')">âœ‚ï¸ Ù‚ÛŒÚ†ÛŒ</button>
                </div>
                <div class="game-info" id="rps-result"></div>
            `;
            
            currentGames.rps = {
                mode: 'ai',
                player1Choice: null,
                player2Choice: null,
                currentPlayer: 1,
                isGameOver: false
            };
            
            updateRPSInfo();
        }

        async function playRPS(choice) {
            const game = currentGames.rps;
            const info = document.getElementById('rps-info');
            const result = document.getElementById('rps-result');
            
            if (game.mode === 'ai') {
                info.textContent = `Ø´Ù…Ø§: ${getRPSEmoji(choice)}`;
                
                const aiChoice = await getAIChoiceRPS();
                result.textContent = `Ø±Ø¨Ø§Øª: ${getRPSEmoji(aiChoice)}`;
                
                const winner = determineRPSWinner(choice, aiChoice);
                if (winner === 'tie') {
                    showToast('Ù…Ø³Ø§ÙˆÛŒ! ğŸ¤', 'info');
                } else if (winner === 'player1') {
                    showToast('Ø´Ù…Ø§ Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯ÛŒØ¯! ğŸ‰', 'success');
                } else {
                    showToast('Ø±Ø¨Ø§Øª Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯! ğŸ¤–', 'error');
                }
            } else {
                if (game.currentPlayer === 1) {
                    game.player1Choice = choice;
                    game.currentPlayer = 2;
                    info.textContent = `Ø¨Ø§Ø²ÛŒÚ©Ù† Û± Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø±Ø¯. Ù†ÙˆØ¨Øª Ø¨Ø§Ø²ÛŒÚ©Ù† Û²`;
                } else {
                    game.player2Choice = choice;
                    const winner = determineRPSWinner(game.player1Choice, game.player2Choice);
                    
                    if (winner === 'tie') {
                        result.textContent = 'Ù…Ø³Ø§ÙˆÛŒ! ğŸ¤';
                        showToast('Ù…Ø³Ø§ÙˆÛŒ!', 'info');
                    } else {
                        result.textContent = `Ø¨Ø§Ø²ÛŒÚ©Ù† ${winner === 'player1' ? 'Û±' : 'Û²'} Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯! ğŸ‰`;
                        showToast(`Ø¨Ø§Ø²ÛŒÚ©Ù† ${winner === 'player1' ? 'Û±' : 'Û²'} Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯!`, 'success');
                    }
                    
                    game.currentPlayer = 1;
                }
            }
        }

        function getRPSEmoji(choice) {
            const emojis = { 'rock': 'ğŸª¨', 'paper': 'ğŸ“„', 'scissors': 'âœ‚ï¸' };
            return emojis[choice] || choice;
        }

        async function getAIChoiceRPS() {
            const prompt = `Ù…Ø§ Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø²ÛŒ "Ø³Ù†Ú¯ØŒ Ú©Ø§ØºØ°ØŒ Ù‚ÛŒÚ†ÛŒ" Ù‡Ø³ØªÛŒÙ…. ÛŒÚ©ÛŒ Ø§Ø² Ø§ÛŒÙ† Ø³Ù‡ Ú¯Ø²ÛŒÙ†Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†: rock, paper, ÛŒØ§ scissors. ÙÙ‚Ø· Ú©Ù„Ù…Ù‡ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³.`;
            const response = await callCohere(prompt, 10);
            const choices = ['rock', 'paper', 'scissors'];
            const normalized = choices.find(choice => response.toLowerCase().includes(choice));
            return normalized || choices[Math.floor(Math.random() * 3)];
        }

        function determineRPSWinner(player1, player2) {
            if (player1 === player2) return 'tie';
            
            if (
                (player1 === 'rock' && player2 === 'scissors') ||
                (player1 === 'paper' && player2 === 'rock') ||
                (player1 === 'scissors' && player2 === 'paper')
            ) {
                return 'player1';
            }
            
            return 'player2';
        }

        function updateRPSInfo() {
            const game = currentGames.rps;
            const info = document.getElementById('rps-info');
            
            if (game.mode === 'ai') {
                info.textContent = 'Ø­Ø§Ù„Øª: Ø¨Ø§Ø²ÛŒ Ø¨Ø§ Ø±Ø¨Ø§Øª ğŸ¤–';
            } else {
                info.textContent = `Ø­Ø§Ù„Øª: Û² Ù†ÙØ±Ù‡ | Ù†ÙˆØ¨Øª Ø¨Ø§Ø²ÛŒÚ©Ù† ${game.currentPlayer}`;
            }
        }

        // ==================== CHOOB (Ladders) ==================== */
        function initChoob() {
            const container = document.getElementById('game-choob');
            container.innerHTML = `
                <h3>ğŸªœ Ø¨Ø§Ø²ÛŒ Ú†Ù„Ø§Ù‚ (Snakes & Ladders)</h3>
                <div class="game-controls">
                    <button class="btn btn-primary" onclick="setGameMode('choob', 'pvp')">ğŸ‘¥ Û² Ù†ÙØ±Ù‡</button>
                    <button class="btn btn-secondary" onclick="setGameMode('choob', 'ai')">ğŸ¤– Ø¨Ø§ Ø±Ø¨Ø§Øª</button>
                    <button class="btn btn-danger" onclick="rollDiceChoob()">ğŸ² ØªØ§Ø³</button>
                </div>
                <div class="game-info" id="choob-info">Ù†ÙˆØ¨Øª Ø¨Ø§Ø²ÛŒÚ©Ù† Û± (ğŸ”µ)</div>
                <div class="game-board" id="choob-board" style="grid-template-columns: repeat(10, 1fr);"></div>
            `;
            
            createBoard('choob', 10, 10);
            currentGames.choob = {
                positions: [0, 0],
                currentPlayer: 0,
                mode: 'pvp',
                isGameOver: false,
                snakes: { 16: 6, 47: 26, 49: 11, 56: 53, 62: 19, 64: 60, 87: 24, 93: 73, 95: 75, 98: 78 },
                ladders: { 1: 38, 4: 14, 9: 31, 21: 42, 28: 84, 36: 44, 51: 67, 71: 91, 80: 100 }
            };
            
            updateChoobBoard();
            updateGameInfo('choob');
        }

        function rollDiceChoob() {
            const game = currentGames.choob;
            if (game.isGameOver) return;
            
            const dice = Math.floor(Math.random() * 6) + 1;
            const player = game.currentPlayer;
            const currentPos = game.positions[player];
            let newPos = Math.min(currentPos + dice, 100);
            
            // Check snakes and ladders
            if (game.snakes[newPos]) {
                newPos = game.snakes[newPos];
                showToast(`Ú†Ù„Ø§Ù‚! Ø±ÙØª Ø¨Ù‡ Ø®Ø§Ù†Ù‡ ${newPos} ğŸ`, 'error');
            } else if (game.ladders[newPos]) {
                newPos = game.ladders[newPos];
                showToast(`Ù†Ø±Ø¯Ø¨Ø§Ù†! Ø¨Ø§Ù„Ø§ Ø±ÙØª Ø¨Ù‡ Ø®Ø§Ù†Ù‡ ${newPos} ğŸªœ`, 'success');
            }
            
            game.positions[player] = newPos;
            updateChoobBoard();
            
            if (newPos === 100) {
                endGame('choob', `Ø¨Ø§Ø²ÛŒÚ©Ù† ${player + 1} Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯! ğŸ‰`);
                return;
            }
            
            // Next player
            if (game.mode === 'ai' && game.currentPlayer === 1) {
                game.currentPlayer = 0;
            } else {
                game.currentPlayer = (game.currentPlayer + 1) % (game.mode === 'ai' ? 1 : 2);
            }
            
            updateGameInfo('choob');
            
            if (game.mode === 'ai' && game.currentPlayer === 1) {
                setTimeout(() => rollDiceChoob(), 1500);
            }
        }

        function updateChoobBoard() {
            const game = currentGames.choob;
            const board = document.getElementById('choob-board');
            
            // Create numbered board (1-100)
            board.innerHTML = '';
            for (let i = 100; i > 0; i--) {
                const cell = document.createElement('div');
                cell.className = 'game-cell';
                cell.dataset.index = 100 - i;
                cell.textContent = i;
                cell.style.fontSize = '0.7rem';
                cell.style.background = game.maze && game.maze[Math.floor((99 - i) / 10)] && game.maze[Math.floor((99 - i) / 10)][(99 - i) % 10] ? '#495670' : 'var(--bg-secondary)';
                board.appendChild(cell);
            }
            
            // Place players
            game.positions.forEach((pos, player) => {
                if (pos > 0) {
                    const cellIndex = 100 - pos;
                    const cell = document.querySelector(`#choob-board .game-cell[data-index="${cellIndex}"]`);
                    if (cell) {
                        cell.textContent = player === 0 ? 'ğŸ”µ' : 'ğŸ”´';
                    }
                }
            });
        }

        function updateGameInfo(gameType) {
            const game = currentGames[gameType];
            const info = document.getElementById(`${gameType}-info`);
            
            if (gameType === 'choob') {
                if (game.mode === 'ai' && game.currentPlayer === 1) {
                    info.textContent = 'Ù†ÙˆØ¨Øª Ø±Ø¨Ø§Øª ğŸ¤–';
                } else {
                    info.textContent = `Ù†ÙˆØ¨Øª Ø¨Ø§Ø²ÛŒÚ©Ù† ${game.currentPlayer + 1} (${game.currentPlayer === 0 ? 'ğŸ”µ' : 'ğŸ”´'})`;
                }
            }
        }

        // ==================== MAZE ==================== */
        function initMaze() {
            const container = document.getElementById('game-maze');
            container.innerHTML = `
                <h3>ğŸŒ€ MAZE - Ù„Ø§Ø¨ÛŒØ±Ù†Øª</h3>
                <div class="game-controls">
                    <button class="btn btn-primary" onclick="generateMaze()">ğŸ² Ù„Ø§Ø¨ÛŒØ±Ù†Øª Ø¬Ø¯ÛŒØ¯</button>
                    <button class="btn btn-secondary" onclick="solveMazeWithAI()">ğŸ¤– Ø­Ù„ Ø¨Ø§ AI</button>
                </div>
                <div class="game-info" id="maze-info">Ø§Ø² ğŸ¤– Ø¨Ù‡ ğŸ¯ Ø¨Ø±Ø³ÛŒØ¯!</div>
                <div class="game-board" id="maze-board" style="grid-template-columns: repeat(10, 1fr);"></div>
            `;
            
            currentGames.maze = {
                size: 10,
                playerPos: {x: 0, y: 0},
                exitPos: {x: 9, y: 9},
                maze: []
            };
            
            generateMaze();
        }

        function generateMaze() {
            const game = currentGames.maze;
            const size = game.size;
            const board = document.getElementById('maze-board');
            board.innerHTML = '';
            board.style.gridTemplateColumns = `repeat(${size}, 1fr)`;
            
            // Create maze with random walls
            game.maze = [];
            for (let y = 0; y < size; y++) {
                game.maze[y] = [];
                for (let x = 0; x < size; x++) {
                    const cell = document.createElement('div');
                    cell.className = 'game-cell';
                    cell.dataset.x = x;
                    cell.dataset.y = y;
                    
                    const isWall = Math.random() < 0.25 && !(x === 0 && y === 0) && !(x === size-1 && y === size-1);
                    game.maze[y][x] = isWall;
                    
                    cell.style.background = isWall ? '#495670' : 'var(--bg-secondary)';
                    cell.textContent = (x === 0 && y === 0) ? 'ğŸ¤–' : (x === size-1 && y === size-1) ? 'ğŸ¯' : '';
                    
                    if (!isWall) {
                        cell.onclick = () => moveInMaze(x, y);
                    }
                    
                    board.appendChild(cell);
                }
            }
            
            game.playerPos = {x: 0, y: 0};
            showToast('Ù„Ø§Ø¨ÛŒØ±Ù†Øª Ø¬Ø¯ÛŒØ¯ Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯! Ø§Ø² ğŸ¤– Ø¨Ù‡ ğŸ¯ Ø¨Ø±ÙˆÛŒØ¯', 'info');
        }

        function moveInMaze(x, y) {
            const game = currentGames.maze;
            if (game.maze[y][x]) return;
            
            // Check adjacency
            const dx = Math.abs(x - game.playerPos.x);
            const dy = Math.abs(y - game.playerPos.y);
            if (dx + dy !== 1) return;
            
            // Move player
            const oldCell = document.querySelector(`#maze-board .game-cell[data-x="${game.playerPos.x}"][data-y="${game.playerPos.y}"]`);
            if (oldCell) oldCell.textContent = '';
            
            game.playerPos = {x, y};
            const newCell = document.querySelector(`#maze-board .game-cell[data-x="${x}"][data-y="${y}"]`);
            newCell.textContent = 'ğŸ¤–';
            
            if (x === game.exitPos.x && y === game.exitPos.y) {
                showToast('ğŸ‰ ØªØ¨Ø±ÛŒÚ©! Ø´Ù…Ø§ Ø¨Ù‡ Ù…Ù‚ØµØ¯ Ø±Ø³ÛŒØ¯ÛŒØ¯!', 'success');
            }
        }

        async function solveMazeWithAI() {
            const game = currentGames.maze;
            showToast('ğŸ¤– Ø±Ø¨Ø§Øª Ø¯Ø± Ø­Ø§Ù„ ÙÚ©Ø± Ú©Ø±Ø¯Ù†...', 'info');
            
            // Convert maze to string
            let mazeStr = '';
            for (let y = 0; y < game.size; y++) {
                for (let x = 0; x < game.size; x++) {
                    mazeStr += game.maze[y][x] ? '#' : '.';
                }
                mazeStr += '\n';
            }
            
            const prompt = `Maze (10x10), # = wall, . = path:\n${mazeStr}\nFind path from (0,0) to (9,9) using U,D,L,R. Respond only with moves like: DDRRURDD`;
            const aiResponse = await callCohere(prompt, 50);
            
            const moves = aiResponse.match(/[UDLR]+/g);
            if (moves && moves[0]) {
                executeMazeMoves(moves[0]);
            } else {
                showToast('âŒ AI Ù†ØªÙˆØ§Ù†Ø³Øª Ù…Ø³ÛŒØ± Ù¾ÛŒØ¯Ø§ Ú©Ù†Ø¯', 'error');
            }
        }

        function executeMazeMoves(moves) {
            const game = currentGames.maze;
            let pos = {x: 0, y: 0};
            
            moves.split('').forEach((move, index) => {
                setTimeout(() => {
                    let newX = pos.x, newY = pos.y;
                    
                    if (move === 'U') newY--;
                    else if (move === 'D') newY++;
                    else if (move === 'L') newX--;
                    else if (move === 'R') newX++;
                    
                    if (newX >= 0 && newX < game.size && newY >= 0 && newY < game.size && !game.maze[newY][newX]) {
                        // Move
                        const oldCell = document.querySelector(`#maze-board .game-cell[data-x="${pos.x}"][data-y="${pos.y}"]`);
                        if (oldCell) oldCell.textContent = '';
                        
                        pos = {x: newX, y: newY};
                        const newCell = document.querySelector(`#maze-board .game-cell[data-x="${newX}"][data-y="${newY}"]`);
                        newCell.textContent = 'ğŸ¤–';
                        
                        if (newX === game.exitPos.x && newY === game.exitPos.y) {
                            showToast('ğŸ‰ Ø±Ø¨Ø§Øª Ø¨Ù‡ Ù…Ù‚ØµØ¯ Ø±Ø³ÛŒØ¯!', 'success');
                        }
                    }
                }, index * 200);
            });
        }

        // ==================== UTILITY FUNCTIONS ==================== */
        const kbInput = document.getElementById('kb-input');
        const kbOutput = document.getElementById('kb-output');
        const cryptoInput = document.getElementById('crypto-input');
        const cryptoKey = document.getElementById('crypto-key');
        const cryptoCode = document.getElementById('crypto-code');
        const cryptoOutput = document.getElementById('crypto-output');
        const pinglishInput = document.getElementById('pinglish-input');
        const pinglishOutput = document.getElementById('pinglish-output');
        const passwordOutput = document.getElementById('password-output');
        const cleanerInput = document.getElementById('cleaner-input');

        // Auto keyboard conversion
        if (kbInput) {
            kbInput.addEventListener('input', () => {
                const mapping = {
                    'q': 'Ø¶', 'w': 'Øµ', 'e': 'Ø«', 'r': 'Ù‚', 't': 'Ù', 'y': 'Øº', 'u': 'Ø¹', 'i': 'Ù‡', 'o': 'Ø®', 'p': 'Ø­',
                    '[': 'Ø¬', ']': 'Ú†', 'a': 'Ø´', 's': 'Ø³', 'd': 'ÛŒ', 'f': 'Ø¨', 'g': 'Ù„', 'h': 'Ø§', 'j': 'Øª',
                    'k': 'Ù†', 'l': 'Ù…', ';': 'Ú©', "'": 'Ú¯', 'z': 'Ø¸', 'x': 'Ø·', 'c': 'Ø²', 'v': 'Ø±', 'b': 'Ø°',
                    'n': 'Ø¯', 'm': 'Ù¾', ',': 'Ùˆ', '.': '.', '/': 'ØŸ', '1': 'Û±', '2': 'Û²', '3': 'Û³', '4': 'Û´', '5': 'Ûµ',
                    '6': 'Û¶', '7': 'Û·', '8': 'Û¸', '9': 'Û¹', '0': 'Û°'
                };
                
                let output = '';
                for (let char of kbInput.value) {
                    output += mapping[char] || char;
                }
                kbOutput.value = output;
            });
        }

        function clearKeyboard() {
            if (kbInput) kbInput.value = '';
            if (kbOutput) kbOutput.value = '';
        }

        // Crypto
        function encryptText() {
            if (!cryptoInput || !cryptoCode) return;
            
            const input = cryptoInput.value;
            const key = cryptoKey?.value || 'default-key';
            
            if (!input) {
                showToast('âŒ Ù„Ø·ÙØ§Ù‹ Ù…ØªÙ†ÛŒ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            
            try {
                const encrypted = CryptoJS.AES.encrypt(input, key).toString();
                const compressed = btoa(encrypted);
                
                cryptoCode.value = compressed;
                if (cryptoOutput) cryptoOutput.style.display = 'block';
                
                addToHistory('crypto', input, compressed, 'Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ');
                showToast('âœ… Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ Ù…ÙˆÙÙ‚ÛŒØªâ€ŒØ¢Ù…ÛŒØ²', 'success');
            } catch (error) {
                showToast('âŒ Ø®Ø·Ø§ Ø¯Ø± Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ', 'error');
            }
        }

        function decryptPrompt() {
            const code = prompt('ğŸ”‘ Ú©Ø¯ Ø±Ù…Ø² Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:');
            const key = prompt('Ú©Ù„ÛŒØ¯ Ø±Ù…Ø² (Ø§Ø®ØªÛŒØ§Ø±ÛŒ):') || 'default-key';
            
            if (!code) return;
            
            try {
                const decrypted = CryptoJS.AES.decrypt(atob(code), key).toString(CryptoJS.enc.Utf8);
                if (!decrypted) throw new Error('Invalid');
                
                if (cryptoInput) cryptoInput.value = decrypted;
                showToast('âœ… Ø±Ù…Ø²Ú¯Ø´Ø§ÛŒÛŒ Ù…ÙˆÙÙ‚', 'success');
            } catch (error) {
                showToast('âŒ Ú©Ø¯ ÛŒØ§ Ú©Ù„ÛŒØ¯ Ù†Ø§Ù…Ø¹ØªØ¨Ø±', 'error');
            }
        }

        function clearCrypto() {
            if (cryptoInput) cryptoInput.value = '';
            if (cryptoKey) cryptoKey.value = '';
            if (cryptoOutput) cryptoOutput.style.display = 'none';
        }

        // Pinglish
        function detectPinglish() {
            if (!pinglishInput) return;
            
            const input = pinglishInput.value;
            const hasLatin = /[a-zA-Z]/.test(input);
            const hasPersian = /[\u0600-\u06FF]/.test(input);
            
            if (hasLatin && !hasPersian) {
                pinglishToFarsi();
            } else if (hasPersian && !hasLatin) {
                farsiToPinglish();
            } else {
                showToast('âš ï¸ Ø²Ø¨Ø§Ù† Ù…ØªÙ† Ù…Ø´Ø®Øµ Ù†ÛŒØ³Øª', 'warning');
            }
        }

        function pinglishToFarsi() {
            if (!pinglishInput || !pinglishOutput) return;
            
            const mapping = {
                'kh': 'Ø®', 'ch': 'Ú†', 'sh': 'Ø´', 'zh': 'Ú˜', 'gh': 'Øº', 'th': 'Ø«',
                'a': 'Ø§', 'b': 'Ø¨', 'c': 'Ú©', 'd': 'Ø¯', 'e': 'Ù‡', 'f': 'Ù', 'g': 'Ú¯',
                'h': 'Ø­', 'i': 'ÛŒ', 'j': 'Ø¬', 'k': 'Ú©', 'l': 'Ù„', 'm': 'Ù…', 'n': 'Ù†',
                'o': 'Ùˆ', 'p': 'Ù¾', 'q': 'Ù‚', 'r': 'Ø±', 's': 'Ø³', 't': 'Øª', 'u': 'Ùˆ',
                'v': 'Ùˆ', 'w': 'Ùˆ', 'x': 'Ú©Ø³', 'y': 'ÛŒ', 'z': 'Ø²'
            };
            
            let output = pinglishInput.value.toLowerCase();
            Object.keys(mapping).sort((a,b) => b.length - a.length).forEach(key => {
                output = output.replaceAll(key, mapping[key]);
            });
            
            pinglishOutput.value = output;
            addToHistory('pinglish', pinglishInput.value, output, 'ÙÛŒÙ†Ú¯Ù„ÛŒØ´ â† ÙØ§Ø±Ø³ÛŒ');
            showToast('âœ… ØªØ¨Ø¯ÛŒÙ„ ÙÛŒÙ†Ú¯Ù„ÛŒØ´ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯', 'success');
        }

        function farsiToPinglish() {
            if (!pinglishInput || !pinglishOutput) return;
            
            const mapping = {
                'Ø®': 'kh', 'Ú†': 'ch', 'Ø´': 'sh', 'Ú˜': 'zh', 'Øº': 'gh', 'Ø«': 'th',
                'Ø§': 'a', 'Ø¨': 'b', 'Ù¾': 'p', 'Øª': 't', 'Ø¬': 'j', 'Ø¯': 'd', 'Ø±': 'r',
                'Ø²': 'z', 'Ø³': 's', 'Ù': 'f', 'Ù‚': 'q', 'Ú©': 'k', 'Ú¯': 'g', 'Ù„': 'l',
                'Ù…': 'm', 'Ù†': 'n', 'Ùˆ': 'o', 'Ù‡': 'h', 'ÛŒ': 'y'
            };
            
            let output = pinglishInput.value;
            Object.keys(mapping).forEach(key => {
                output = output.replaceAll(key, mapping[key]);
            });
            
            pinglishOutput.value = output;
            addToHistory('pinglish', pinglishInput.value, output, 'ÙØ§Ø±Ø³ÛŒ â† ÙÛŒÙ†Ú¯Ù„ÛŒØ´');
            showToast('âœ… ØªØ¨Ø¯ÛŒÙ„ ÙØ§Ø±Ø³ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯', 'success');
        }

        // Tools
        function generatePassword() {
            if (!passwordOutput) return;
            
            const charset = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()';
            let password = '';
            for (let i = 0; i < 16; i++) {
                password += charset.charAt(Math.floor(Math.random() * charset.length));
            }
            
            passwordOutput.value = password;
            addToHistory('tools', 'Generated Password', password, 'Password Generator');
            showToast('âœ… Ù¾Ø³ÙˆØ±Ø¯ ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯', 'success');
        }

        function cleanText() {
            if (!cleanerInput) return;
            
            let text = cleanerInput.value;
            
            if (document.getElementById('fix-spaces')?.checked) {
                text = text.replace(/\s+/g, ' ').trim();
            }
            
            if (document.getElementById('fix-arabic')?.checked) {
                text = text.replace(/ÙŠ/g, 'ÛŒ').replace(/Ùƒ/g, 'Ú©');
            }
            
            if (document.getElementById('fix-punctuation')?.checked) {
                text = text.replace(/ØŸ/g, '?');
            }
            
            cleanerInput.value = text;
            addToHistory('tools', 'Original Text', text, 'Text Cleaner');
            showToast('âœ… Ù…ØªÙ† Ø§ØµÙ„Ø§Ø­ Ø´Ø¯', 'success');
        }

        function addToHistory(type, input, output, action) {
            if (!input) return;
            
            const history = JSON.parse(localStorage.getItem('convertHistory_v3') || '[]');
            const item = {
                id: Date.now(),
                type,
                input,
                output,
                action,
                timestamp: new Date().toLocaleDateString('fa-IR') + ' ' + new Date().toLocaleTimeString('fa-IR')
            };
            
            if (history.length >= 50) history.shift();
            history.push(item);
            
            localStorage.setItem('convertHistory_v3', JSON.stringify(history));
        }

        function loadHistory() {
            const history = JSON.parse(localStorage.getItem('convertHistory_v3') || '[]');
            const container = document.getElementById('history-list');
            
            if (!container) return;
            
            if (history.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 2rem;">ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª</p>';
                return;
            }
            
            container.innerHTML = history.reverse().map(item => `
                <div class="history-item" onclick="loadHistoryItem('${item.id}')" role="button" tabindex="0">
                    <div class="history-date">${item.timestamp} - ${item.action}</div>
                    <div class="history-text">${item.input.substring(0, 50)}${item.input.length > 50 ? '...' : ''} â†’ ${item.output.substring(0, 50)}${item.output.length > 50 ? '...' : ''}</div>
                </div>
            `).join('');
        }

        function loadHistoryItem(id) {
            const history = JSON.parse(localStorage.getItem('convertHistory_v3') || '[]');
            const item = history.find(h => h.id == id);
            
            if (!item) return;
            
            const tabs = ['keyboard', 'crypto', 'pinglish', 'tools'];
            const tabIndex = tabs.indexOf(item.type);
            
            if (tabIndex !== -1) {
                document.querySelectorAll('.nav-link')[tabIndex].click();
                
                setTimeout(() => {
                    if (item.type === 'keyboard') {
                        if (kbInput) kbInput.value = item.input;
                        if (kbOutput) kbOutput.value = item.output;
                    } else if (item.type === 'crypto') {
                        if (cryptoInput) cryptoInput.value = item.output;
                    } else if (item.type === 'pinglish') {
                        if (pinglishInput) pinglishInput.value = item.input;
                        if (pinglishOutput) pinglishOutput.value = item.output;
                    } else if (item.type === 'tools') {
                        if (passwordOutput) passwordOutput.value = item.output;
                    }
                }, 100);
            }
            
            showToast('âœ… Ù…ØªÙ† Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯', 'success');
        }

        function clearHistory() {
            if (!confirm('âš ï¸ Ø¢ÛŒØ§ Ø§Ø² Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ØªÙ…Ø§Ù… ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ')) return;
            
            localStorage.removeItem('convertHistory_v3');
            loadHistory();
            showToast('âœ… ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ù¾Ø§Ú© Ø´Ø¯', 'success');
        }

        function exportHistory() {
            const history = JSON.parse(localStorage.getItem('convertHistory_v3') || '[]');
            if (history.length === 0) {
                showToast('âŒ ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª', 'error');
                return;
            }
            
            const csv = history.map(item => 
                `"${item.action}","${item.input.replace(/"/g, '""')}","${item.output.replace(/"/g, '""')}","${item.timestamp}"`
            ).join('\n');
            
            const blob = new Blob(['\ufeff' + csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `ØªØ§Ø±ÛŒØ®Ú†Ù‡-ØªØ¨Ø¯ÛŒÙ„-${new Date().toLocaleDateString('fa-IR')}.csv`;
            link.click();
            
            showToast('âœ… ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø´Ø¯', 'success');
        }

        function addToLibrary(type) {
            const input = type === 'keyboard' ? kbInput?.value : pinglishInput?.value;
            const output = type === 'keyboard' ? kbOutput?.value : pinglishOutput?.value;
            
            if (!input || !output) {
                showToast('âŒ Ø§Ø¨ØªØ¯Ø§ ØªØ¨Ø¯ÛŒÙ„ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡ÛŒØ¯', 'error');
                return;
            }
            
            const title = prompt('ğŸ·ï¸ Ø¹Ù†ÙˆØ§Ù† Ø§ÛŒÙ† Ù…ØªÙ† Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:');
            if (!title) return;
            
            const tags = prompt('Ø¨Ø±Ú†Ø³Ø¨â€ŒÙ‡Ø§ (Ø¨Ø§ Ú©Ø§Ù…Ø§ Ø¬Ø¯Ø§ Ú©Ù†ÛŒØ¯):', type + ', Ø¨Ø§Ø²ÛŒ') || '';
            
            const library = JSON.parse(localStorage.getItem('personalLibrary_v3') || '[]');
            const item = {
                id: Date.now(),
                title,
                type,
                input,
                output,
                tags: tags.split(',').map(t => t.trim()),
                createdAt: new Date().toLocaleDateString('fa-IR')
            };
            
            library.push(item);
            localStorage.setItem('personalLibrary_v3', JSON.stringify(library));
            
            showToast('âœ… Ø¨Ù‡ Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯', 'success');
            if (document.getElementById('library').classList.contains('active')) loadLibrary();
        }

        function addToLibraryPrompt() {
            const title = prompt('ğŸ·ï¸ Ø¹Ù†ÙˆØ§Ù† Ù…ØªÙ†:');
            if (!title) return;
            
            const input = prompt('Ù…ØªÙ† ÙˆØ±ÙˆØ¯ÛŒ:');
            if (!input) return;
            
            const output = prompt('Ù…ØªÙ† Ø®Ø±ÙˆØ¬ÛŒ:') || '';
            
            const library = JSON.parse(localStorage.getItem('personalLibrary_v3') || '[]');
            library.push({
                id: Date.now(),
                title,
                input,
                output,
                date: new Date().toLocaleDateString('fa-IR')
            });
            
            localStorage.setItem('personalLibrary_v3', JSON.stringify(library));
            loadLibrary();
            showToast('âœ… Ø¢ÛŒØªÙ… Ø¬Ø¯ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯', 'success');
        }

        function loadLibrary() {
            const library = JSON.parse(localStorage.getItem('personalLibrary_v3') || '[]');
            const container = document.getElementById('library-grid');
            
            if (!container) return;
            
            if (library.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 2rem;">Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª</p>';
                return;
            }
            
            container.innerHTML = library.reverse().map(item => `
                <div class="history-item">
                    <h4 style="color: var(--accent); margin-bottom: 0.5rem;">${item.title}</h4>
                    <div class="history-date">${item.date}</div>
                    <div class="history-text" style="margin-top: 0.5rem;">${item.input.substring(0, 60)}${item.input.length > 60 ? '...' : ''} â†’ ${item.output.substring(0, 60)}${item.output.length > 60 ? '...' : ''}</div>
                </div>
            `).join('');
        }

        function copyToClipboard(text, message) {
            if (!text) {
                showToast('âŒ Ú†ÛŒØ²ÛŒ Ø¨Ø±Ø§ÛŒ Ú©Ù¾ÛŒ Ù†ÛŒØ³Øª', 'error');
                return;
            }
            
            navigator.clipboard.writeText(text).then(() => {
                showToast(message || 'âœ… Ú©Ù¾ÛŒ Ø´Ø¯!', 'success');
            }).catch(() => {
                // Fallback
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showToast(message || 'âœ… Ú©Ù¾ÛŒ Ø´Ø¯!', 'success');
            });
        }

        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        // ==================== INITIALIZATION ==================== */
        // Load data on page load
        document.addEventListener('DOMContentLoaded', () => {
            loadHistory();
            loadLibrary();
            
            // Close mobile menu on resize
            window.addEventListener('resize', () => {
                if (window.innerWidth > 768) {
                    mobileMenuToggle.classList.remove('active');
                    mobileOverlay.classList.remove('active');
                    document.body.style.overflow = '';
                }
            });
            
            console.log('ğŸš€ Ø§Ø¨Ø²Ø§Ø± Ù…ØªÙ† Ùˆ Ø¨Ø§Ø²ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ 3.0 Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª!');
            console.log('âš ï¸ Ù‡Ø´Ø¯Ø§Ø±: API Key Ø¯Ø± Frontend Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±Ø¯ - ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ ØªØ³Øª!');
        });
    </script>
</body>
</html>
