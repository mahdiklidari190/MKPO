<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø¬Ø¹Ø¨Ù‡ Ø§Ø¨Ø²Ø§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù†ÙÚ©Ø³ÙˆØ³ | Nexus Tools</title>
    
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --bg-dark: #0f172a;
            --glass-bg: rgba(30, 41, 59, 0.7);
            --glass-border: rgba(255, 255, 255, 0.08);
            --primary: #8b5cf6;
            --secondary: #06b6d4;
            --accent: #f43f5e;
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
            --font-main: 'Vazirmatn', sans-serif;
            --font-code: 'JetBrains Mono', monospace;
            --radius: 20px;
            --shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: var(--font-main);
            background-color: var(--bg-dark);
            color: var(--text-main);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Background */
        .background-blobs { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; overflow: hidden; }
        .blob { position: absolute; border-radius: 50%; filter: blur(80px); opacity: 0.4; animation: float 15s infinite ease-in-out; }
        .blob-1 { width: 400px; height: 400px; background: var(--primary); top: -100px; left: -100px; }
        .blob-2 { width: 300px; height: 300px; background: var(--secondary); bottom: -50px; right: -50px; animation-delay: 2s; }
        @keyframes float { 0%, 100% { transform: translate(0, 0) scale(1); } 50% { transform: translate(40px, 40px) scale(1.1); } }

        /* Layout */
        .app-container { max-width: 1200px; margin: 0 auto; padding: 2rem 1rem; display: grid; grid-template-columns: 260px 1fr; gap: 2rem; }

        /* Sidebar */
        .sidebar {
            background: var(--glass-bg); backdrop-filter: blur(12px); border: 1px solid var(--glass-border);
            border-radius: var(--radius); padding: 1.5rem; height: fit-content; position: sticky; top: 2rem; box-shadow: var(--shadow);
        }
        .brand { font-size: 1.5rem; font-weight: 900; background: linear-gradient(135deg, var(--secondary), var(--primary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 2rem; text-align: center; }
        .nav-item { padding: 0.8rem 1rem; border-radius: 12px; cursor: pointer; transition: 0.3s; color: var(--text-muted); display: flex; align-items: center; gap: 12px; margin-bottom: 5px; }
        .nav-item:hover { background: rgba(255,255,255,0.05); color: var(--text-main); }
        .nav-item.active { background: linear-gradient(90deg, rgba(139, 92, 246, 0.2), transparent); color: var(--secondary); border-right: 3px solid var(--secondary); }

        /* Cards */
        .tab-content { display: none; animation: fadeIn 0.4s ease-out; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .card { background: var(--glass-bg); backdrop-filter: blur(16px); border: 1px solid var(--glass-border); border-radius: var(--radius); padding: 2rem; margin-bottom: 2rem; box-shadow: var(--shadow); position: relative; }
        h2 { margin-bottom: 1.5rem; display: flex; align-items: center; gap: 10px; }
        h2 span { font-size: 0.9rem; color: var(--text-muted); font-weight: 400; margin-right: auto; }

        /* Forms */
        textarea, input { width: 100%; background: rgba(15, 23, 42, 0.6); border: 1px solid var(--glass-border); border-radius: 12px; padding: 1rem; color: var(--text-main); font-family: var(--font-main); margin-top: 8px; }
        .btn { padding: 0.8rem 1.5rem; border-radius: 12px; border: none; cursor: pointer; font-weight: 700; transition: 0.3s; display: inline-flex; align-items: center; gap: 8px; margin: 5px; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-secondary { background: rgba(255,255,255,0.1); color: white; }
        .btn-accent { background: var(--accent); color: white; }

        /* Games */
        .games-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; }
        .game-card { background: rgba(255,255,255,0.03); border: 1px solid var(--glass-border); border-radius: 16px; padding: 1.5rem; cursor: pointer; text-align: center; transition: 0.3s; }
        .game-card:hover { transform: translateY(-5px); border-color: var(--secondary); }
        .tictactoe-board { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; max-width: 300px; margin: 20px auto; }
        .cell { background: rgba(255,255,255,0.05); aspect-ratio: 1; border-radius: 10px; font-size: 2rem; display: flex; align-items: center; justify-content: center; cursor: pointer; }

        /* Toast */
        .toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(100px); background: #1e293b; padding: 1rem 2rem; border-radius: 50px; border: 1px solid var(--primary); z-index: 1000; transition: 0.4s; opacity: 0; }
        .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }

        @media (max-width: 768px) {
            .app-container { grid-template-columns: 1fr; padding-bottom: 80px; }
            .sidebar { position: fixed; bottom: 0; left: 0; width: 100%; flex-direction: row; top: auto; border-radius: 20px 20px 0 0; display: flex; overflow-x: auto; padding: 10px; }
            .brand { display: none; }
            .nav-item { flex-direction: column; font-size: 0.7rem; min-width: 60px; }
        }
    </style>
</head>
<body>

    <div class="background-blobs">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
    </div>

    <div class="app-container">
        <nav class="sidebar">
            <div class="brand">NEXUS</div>
            <div class="nav-item active" onclick="switchTab('keyboard', this)">âŒ¨ï¸ Ú©ÛŒØ¨ÙˆØ±Ø¯</div>
            <div class="nav-item" onclick="switchTab('crypto', this)">ğŸ” Ø§Ù…Ù†ÛŒØª</div>
            <div class="nav-item" onclick="switchTab('pinglish', this)">ğŸŒ ÙÛŒÙ†Ú¯Ù„ÛŒØ´</div>
            <div class="nav-item" onclick="switchTab('tools', this)">ğŸ› ï¸ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§</div>
            <div class="nav-item" onclick="switchTab('games', this)">ğŸ® Ø¨Ø§Ø²ÛŒ</div>
            <div class="nav-item" onclick="switchTab('library', this)">ğŸ“š Ø°Ø®ÛŒØ±Ù‡</div>
        </nav>

        <main class="content-area">
            <section id="keyboard" class="tab-content active">
                <div class="card">
                    <h2>Ø§ØµÙ„Ø§Ø­ ØªØ§ÛŒÙ¾ Ø§Ø´ØªØ¨Ø§Ù‡</h2>
                    <textarea id="kb-input" rows="4" placeholder="Ù…Ø«Ù„Ø§Ù‹: s alam (Ø³Ù„Ø§Ù…)" oninput="convertKeyboard()"></textarea>
                    <textarea id="kb-output" rows="4" readonly style="margin-top:20px; color:var(--secondary)"></textarea>
                    <div class="btn-container">
                        <button class="btn btn-primary" onclick="copyToClipboard('kb-output')">ğŸ“‹ Ú©Ù¾ÛŒ</button>
                        <button class="btn btn-secondary" onclick="clearFields('kb')">ğŸ—‘ï¸ Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ</button>
                    </div>
                </div>
            </section>

            <section id="crypto" class="tab-content">
                <div class="card">
                    <h2>Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ AES</h2>
                    <textarea id="crypto-input" rows="3" placeholder="Ù…ØªÙ† Ù¾ÛŒØ§Ù…..."></textarea>
                    <input type="password" id="crypto-key" placeholder="Ú©Ù„ÛŒØ¯ Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ (Ù¾Ø³ÙˆØ±Ø¯)">
                    <div class="btn-container">
                        <button class="btn btn-primary" onclick="performCrypto('encrypt')">ğŸ”’ Ù‚ÙÙ„ Ú©Ø±Ø¯Ù†</button>
                        <button class="btn btn-accent" onclick="performCrypto('decrypt')">ğŸ”“ Ø¨Ø§Ø² Ú©Ø±Ø¯Ù†</button>
                    </div>
                    <textarea id="crypto-output" rows="3" readonly style="margin-top:20px; font-family:monospace;"></textarea>
                </div>
            </section>

            <section id="pinglish" class="tab-content">
                <div class="card">
                    <h2>ÙÛŒÙ†Ú¯Ù„ÛŒØ´ Ø¨Ù‡ ÙØ§Ø±Ø³ÛŒ</h2>
                    <textarea id="pin-input" rows="4" placeholder="Salam chetori?"></textarea>
                    <div class="btn-container" style="justify-content:center;">
                        <button class="btn btn-primary" onclick="convertPinglish()">âœ¨ ØªØ¨Ø¯ÛŒÙ„ Ú©Ù†</button>
                    </div>
                    <textarea id="pin-output" rows="4" readonly style="margin-top:20px;"></textarea>
                </div>
            </section>

            <section id="tools" class="tab-content">
                <div class="card">
                    <h2>Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ø³Ø±ÛŒØ¹</h2>
                    <div style="margin-bottom:20px">
                        <label>ğŸ² ØªÙˆÙ„ÛŒØ¯ Ù¾Ø³ÙˆØ±Ø¯ Ø§Ù…Ù†:</label>
                        <div style="display:flex; gap:10px">
                            <input type="text" id="pass-out" readonly>
                            <button class="btn btn-primary" onclick="generatePass()">ØªÙˆÙ„ÛŒØ¯</button>
                        </div>
                    </div>
                    <hr style="opacity:0.1; margin:20px 0">
                    <div>
                        <label>ğŸ§¹ ØªÙ…ÛŒØ²Ú©Ù†Ù†Ø¯Ù‡ Ù…ØªÙ†:</label>
                        <textarea id="clean-input" rows="2" placeholder="Ù…ØªÙ† Ø¨Ø§ Ù†ÛŒÙ…â€ŒÙØ§ØµÙ„Ù‡ ÛŒØ§ ÛŒ/Ú© Ø¹Ø±Ø¨ÛŒ..."></textarea>
                        <button class="btn btn-secondary" onclick="cleanText()">âœ¨ Ø§ØµÙ„Ø§Ø­ Ø­Ø±ÙˆÙ Ùˆ ÙÙˆØ§ØµÙ„</button>
                    </div>
                </div>
            </section>

            <section id="games" class="tab-content">
                <div id="games-menu" class="games-grid">
                    <div class="game-card" onclick="startGame('tictactoe')">
                        <div style="font-size:3rem">âŒ</div>
                        <h3>Ø¯ÙˆØ² (Tic Tac Toe)</h3>
                    </div>
                    <div class="game-card" onclick="startGame('rps')">
                        <div style="font-size:3rem">âœŠ</div>
                        <h3>Ø³Ù†Ú¯ Ú©Ø§ØºØ° Ù‚ÛŒÚ†ÛŒ</h3>
                    </div>
                </div>

                <div id="game-tictactoe" style="display:none; text-align:center">
                    <h3>Ù†ÙˆØ¨Øª: <span id="turn-display">X</span></h3>
                    <div class="tictactoe-board" id="ttt-board"></div>
                    <button class="btn btn-secondary" onclick="exitGame()">Ø®Ø±ÙˆØ¬</button>
                </div>

                <div id="game-rps" style="display:none; text-align:center">
                    <h3>Ø³Ù†Ú¯ØŒ Ú©Ø§ØºØ°ØŒ Ù‚ÛŒÚ†ÛŒ!</h3>
                    <div class="btn-container" style="justify-content:center; margin:20px 0">
                        <button class="btn btn-secondary" onclick="playRPS('rock')">âœŠ Ø³Ù†Ú¯</button>
                        <button class="btn btn-secondary" onclick="playRPS('paper')">âœ‹ Ú©Ø§ØºØ°</button>
                        <button class="btn btn-secondary" onclick="playRPS('scissors')">âœŒï¸ Ù‚ÛŒÚ†ÛŒ</button>
                    </div>
                    <div id="rps-result" style="font-size:1.2rem; margin:20px; min-height:50px"></div>
                    <button class="btn btn-accent" onclick="exitGame()">Ø®Ø±ÙˆØ¬</button>
                </div>
            </section>

            <section id="library" class="tab-content">
                <div class="card">
                    <h2>Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Ø°Ø®ÛŒØ±Ù‡â€ŒÙ‡Ø§</h2>
                    <div id="library-list"></div>
                    <button class="btn btn-secondary" style="margin-top:20px" onclick="clearLibrary()">ğŸ—‘ï¸ Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ú©Ù„ ØªØ§Ø±ÛŒØ®Ú†Ù‡</button>
                </div>
            </section>
        </main>
    </div>

    <div id="toast" class="toast"></div>

    <script>
        // --- Core UI ---
        function switchTab(id, el) {
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            el.classList.add('active');
            document.getElementById(id).classList.add('active');
            if(id === 'library') loadLibrary();
        }

        function showToast(msg) {
            const t = document.getElementById('toast');
            t.innerText = msg; t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 3000);
        }

        function copyToClipboard(id) {
            const val = document.getElementById(id).value;
            if(!val) return;
            navigator.clipboard.writeText(val);
            showToast('Ú©Ù¾ÛŒ Ø´Ø¯! âœ…');
        }

        // --- Logic: Keyboard ---
        const kbMap = {'q':'Ø¶','w':'Øµ','e':'Ø«','r':'Ù‚','t':'Ù','y':'Øº','u':'Ø¹','i':'Ù‡','o':'Ø®','p':'Ø­','[':'Ø¬',']':'Ú†','a':'Ø´','s':'Ø³','d':'ÛŒ','f':'Ø¨','g':'Ù„','h':'Ø§','j':'Øª','k':'Ù†','l':'Ù…',';':'Ú©',"'":'Ú¯','z':'Ø¸','x':'Ø·','c':'Ø²','v':'Ø±','b':'Ø°','n':'Ø¯','m':'Ù¾',',':'Ùˆ','?':'ØŸ'};
        function convertKeyboard() {
            const input = document.getElementById('kb-input').value.toLowerCase();
            document.getElementById('kb-output').value = input.split('').map(c => kbMap[c] || c).join('');
        }

        // --- Logic: Crypto ---
        function performCrypto(mode) {
            const input = document.getElementById('crypto-input').value;
            const key = document.getElementById('crypto-key').value || 'NEXUS_DEFAULT';
            if(!input) return;
            try {
                if(mode === 'encrypt') {
                    const res = CryptoJS.AES.encrypt(input, key).toString();
                    document.getElementById('crypto-output').value = res;
                } else {
                    const bytes = CryptoJS.AES.decrypt(input, key);
                    document.getElementById('crypto-output').value = bytes.toString(CryptoJS.enc.Utf8);
                }
            } catch(e) { showToast('Ø®Ø·Ø§ Ø¯Ø± Ø¹Ù…Ù„ÛŒØ§Øª! âŒ'); }
        }

        // --- Logic: Pinglish (Enhanced) ---
        const pinMap = {'sh':'Ø´','ch':'Ú†','gh':'Ù‚','kh':'Ø®','zh':'Ú˜','a':'Ø§','b':'Ø¨','p':'Ù¾','t':'Øª','j':'Ø¬','d':'Ø¯','r':'Ø±','z':'Ø²','s':'Ø³','f':'Ù','k':'Ú©','g':'Ú¯','l':'Ù„','m':'Ù…','n':'Ù†','v':'Ùˆ','h':'Ù‡','y':'ÛŒ','i':'ÛŒ','u':'Ùˆ','o':'Ùˆ'};
        function convertPinglish() {
            let text = document.getElementById('pin-input').value.toLowerCase();
            ['sh','ch','gh','kh','zh'].forEach(k => text = text.replace(new RegExp(k, 'g'), pinMap[k]));
            let out = text.split('').map(c => pinMap[c] || c).join('');
            document.getElementById('pin-output').value = out;
        }

        // --- Logic: Tools ---
        function generatePass() {
            const s = "abcdefgABCDEFG123456789!@#$%";
            document.getElementById('pass-out').value = Array(12).fill(s).map(x => x[Math.floor(Math.random()*x.length)]).join('');
        }
        function cleanText() {
            let t = document.getElementById('clean-input').value;
            t = t.replace(/ÙŠ/g, "ÛŒ").replace(/Ùƒ/g, "Ú©").replace(/\s+/g, ' ').trim();
            document.getElementById('clean-input').value = t;
            showToast('Ø§ØµÙ„Ø§Ø­ Ø´Ø¯ âœ¨');
        }

        // --- Logic: Games (Tic Tac Toe & RPS) ---
        let tttBoard = Array(9).fill('');
        let currentPlayer = 'X';
        function startGame(g) {
            document.getElementById('games-menu').style.display = 'none';
            if(g === 'tictactoe') {
                document.getElementById('game-tictactoe').style.display = 'block';
                initTTT();
            } else {
                document.getElementById('game-rps').style.display = 'block';
            }
        }
        function exitGame() {
            document.getElementById('game-tictactoe').style.display = 'none';
            document.getElementById('game-rps').style.display = 'none';
            document.getElementById('games-menu').style.display = 'grid';
        }
        function initTTT() {
            tttBoard = Array(9).fill(''); currentPlayer = 'X';
            const b = document.getElementById('ttt-board'); b.innerHTML = '';
            tttBoard.forEach((_, i) => {
                const d = document.createElement('div'); d.className = 'cell';
                d.onclick = () => {
                    if(tttBoard[i] || !currentPlayer) return;
                    tttBoard[i] = 'X'; d.innerText = 'X';
                    if(checkWin('X')) return;
                    setTimeout(aiMove, 500);
                };
                b.appendChild(d);
            });
        }
        function aiMove() {
            const empty = tttBoard.map((v, i) => v === '' ? i : null).filter(v => v !== null);
            if(empty.length) {
                const move = empty[Math.floor(Math.random()*empty.length)];
                tttBoard[move] = 'O';
                document.getElementById('ttt-board').children[move].innerText = 'O';
                checkWin('O');
            }
        }
        function checkWin(p) {
            const wins = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
            if(wins.some(w => w.every(i => tttBoard[i] === p))) {
                confetti(); showToast(`Ø¨Ø§Ø²ÛŒÚ©Ù† ${p} Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯! ğŸ‰`);
                setTimeout(initTTT, 2000); return true;
            }
            return false;
        }
        function playRPS(user) {
            const options = ['rock', 'paper', 'scissors'];
            const ai = options[Math.floor(Math.random()*3)];
            const resEl = document.getElementById('rps-result');
            let res = "";
            if(user === ai) res = "Ù…Ø³Ø§ÙˆÛŒ! ğŸ¤";
            else if((user==='rock' && ai==='scissors') || (user==='paper' && ai==='rock') || (user==='scissors' && ai==='paper')) {
                res = "ØªÙˆ Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯ÛŒ! ğŸ‰"; confetti();
            } else res = "Ø±Ø¨Ø§Øª Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯! ğŸ¤–";
            resEl.innerHTML = `Ø§Ù†ØªØ®Ø§Ø¨ ØªÙˆ: ${user} | Ø§Ù†ØªØ®Ø§Ø¨ Ø±Ø¨Ø§Øª: ${ai} <br> <b>${res}</b>`;
        }

        // --- Logic: Library ---
        function loadLibrary() {
            const lib = JSON.parse(localStorage.getItem('nx_lib') || '[]');
            const container = document.getElementById('library-list');
            container.innerHTML = lib.length ? lib.map(item => `<div class="card" style="padding:10px; margin-top:5px">${item}</div>`).join('') : 'Ø®Ø§Ù„ÛŒ Ø§Ø³Øª...';
        }
        function clearLibrary() { localStorage.removeItem('nx_lib'); loadLibrary(); }
    </script>
</body>
</html>
